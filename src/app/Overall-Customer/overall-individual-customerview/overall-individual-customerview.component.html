<mat-card-header>
  <div class="row d-flex justify-content-start mx-auto">
    <div class="col-md-6">
      <h5>{{ viewcustomer?.customerName }}</h5>
    </div>
    <!-- <div class="col-md-4  mt-1">
      <h6> Overall Plan Amount:  <span style="color:green;">â‚¹{{ this.totalamount }}</span></h6>
    </div> -->
    <div class="col-md-6 d-flex justify-content-end mb-1">
      <button class="button1" (click)="close()">Back</button>
    </div>

  </div>
</mat-card-header>

<ul class="nav nav-pills nav-fill mb-4 mx-3 mt-3">
  <li class="nav-item" [hidden]="valuecustomerinfo!=='Customers-Customer Info'">
    <a style="cursor: pointer;font-weight: 600;" class="nav-link" [class.active]="selectedTab === 'customer-info'"
      (click)="selectTab('customer-info')">
      Customer Info
    </a>
  </li>
  &nbsp; &nbsp;
  <li class="nav-item" [hidden]="valueSetupBox!=='Customers-Set-Topbox'">
    <a style="cursor: pointer;font-weight: 600;" class="nav-link" [class.active]="selectedTab === 'Setup-boxs'"
      (click)="selectTab('Setup-boxs')">
      Set-Topbox
    </a>
  </li>
  &nbsp; &nbsp;
  <li class="nav-item" [hidden]="valueTransactions!=='Customers-Transaction'">
    <a style="cursor: pointer;font-weight: 600;" class="nav-link" [class.active]="selectedTab === 'Transaction'"
      (click)="selectTab('Transaction')">
      Transactions
    </a>
  </li>
  &nbsp;&nbsp;
  <li class="nav-item" [hidden]="valueAdditionalPayments!=='Customers-Additional Payments'">
    <a style="cursor: pointer;font-weight: 600;" class="nav-link" [class.active]="selectedTab === 'Additional-Payments'"
      (click)="selectTab('Additional-Payments')">
      Additional Payments
    </a>
  </li>
  &nbsp;&nbsp;
  <li class="nav-item" [hidden]="valuecustomerRefunds!=='Customers-Refunds'">
    <a style="cursor: pointer;font-weight: 600;" class="nav-link" [class.active]="selectedTab === 'Refund'"
      (click)="selectTab('Refund')">
      Refunds
    </a>
  </li>


</ul>



<div *ngIf="selectedTab === 'customer-info'" id="customer-info" class="mb-4">
  <div class="container" [hidden]="valuecustomerinfo!=='Customers-Customer Info'">
    <article class="card">
      <div class="card-body">
        <div class="container-fluid">
          <h5 class="mb-3">Customer Identity</h5>
          <hr>
          <div class="row mb-2">
            <div class="col-md-6 col-12 d-flex">
              <div class="fw-semibold w-50">Customer Id</div>
              <div class="w-50">{{ viewcustomer?.customerReferenceId || '-' }}</div>
            </div>
            <div class="col-md-6 col-12 d-flex">
              <div class="fw-semibold w-50">MSO-Customer ID</div>
              <div class="w-50">{{ viewcustomer?.customerMsoId || '-' }}</div>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6 col-12 d-flex">
              <div class="fw-semibold w-50">Customer Name</div>
              <div class="w-50">{{ viewcustomer?.customerName || '-' }}</div>
            </div>
            <div class="col-md-6 col-12 d-flex">
              <div class="fw-semibold w-50">Email Address</div>
              <div class="w-50">{{ viewcustomer?.emailAddress || '-' }}</div>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6 col-12 d-flex">
              <div class="fw-semibold w-50">Mobile Number</div>
              <div class="w-50">{{ viewcustomer?.mobileNumber || '-' }}</div>
            </div>
            <div class="col-md-6 col-12 d-flex">
              <div class="fw-semibold w-50">Alternative Mobile Number</div>
              <div class="w-50">{{ viewcustomer?.alterMobileNumber || '-' }}</div>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6 col-12 d-flex">
              <div class="fw-semibold w-50">Age</div>
              <div class="w-50">{{ viewcustomer?.age || '-' }}</div>
            </div>
          </div>
          <h5 class="mt-4 mb-3">Connection & Payments</h5>
          <hr>
          <div class="row mb-2">
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Connection Type</div>
              <div class="w-50">{{ viewcustomer?.freeLine || '-' }}</div>
            </div>
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Advance Paid</div>
              <div class="w-50">{{ viewcustomer?.advanceStatus || '-' }}</div>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Advance Amount</div>
              <div class="w-50">{{ viewcustomer?.advanceAmount || 0.0 }}</div>
            </div>
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Branch Name</div>
              <div class="w-50">{{ viewcustomer?.branchId?.branchName || '-' }}</div>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Branch Status</div>
              <div class="w-50">{{ viewcustomer?.branchStatus || '-' }}</div>
            </div>
          </div>

          <h5 class="mt-4 mb-3">Residential Details</h5>
          <hr>
          <div class="row mb-2">
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Area</div>
              <div class="w-50">{{ viewcustomer?.area || '-' }}</div>
            </div>
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Street Name</div>
              <div class="w-50">{{ viewcustomer?.streetName || '-' }}</div>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Door Number</div>
              <div class="w-50">{{ viewcustomer?.doorNumber || '-' }}</div>
            </div>
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Block Number</div>
              <div class="w-50">{{ viewcustomer?.blockNumber || '-' }}</div>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Flat Number</div>
              <div class="w-50">{{ viewcustomer?.flatNumber || '-' }}</div>
            </div>
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">House Name</div>
              <div class="w-50">{{ viewcustomer?.houseName || '-' }}</div>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Apartment Name</div>
              <div class="w-50">{{ viewcustomer?.apartmentName || '-' }}</div>
            </div>
          </div>

          <h5 class="mt-4 mb-3">Location</h5>
          <hr>
          <div class="row mb-2">
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Land Mark</div>
              <div class="w-50">{{ viewcustomer?.landmark || '-' }}</div>
            </div>
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Country</div>
              <div class="w-50">{{ viewcustomer?.countryName || '-' }}</div>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">State</div>
              <div class="w-50">{{ viewcustomer?.stateName || '-' }}</div>
            </div>
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">City</div>
              <div class="w-50">{{ viewcustomer?.cityName || '-' }}</div>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Pincode</div>
              <div class="w-50">{{ viewcustomer?.pincodeName || '-' }}</div>
            </div>
          </div>



          <h5 class="mt-4 mb-3">Audit Trail</h5>
          <hr>
          <div class="row mb-2">
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Created At</div>
              <div class="w-50 text-nowrap">{{ viewcustomer?.createdDateTime | date:"dd/MM/yyyy hh:mm a" }}</div>
            </div>
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Created By</div>
              <div class="w-50">{{ viewcustomer?.createdBy || '-' }}</div>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Modified By</div>
              <div class="w-50">{{ viewcustomer?.modifiedBy || '-' }}</div>
            </div>
            <div class="col-md-6 d-flex">
              <div class="fw-semibold w-50">Modified At</div>
              <div class="w-50 text-nowrap">{{ viewcustomer?.modifiedDateTime | date:"dd/MM/yyyy hh:mm a" }}</div>
            </div>
          </div>
        </div>
      </div>
    </article>
  </div>
</div>

<!----settopbox--->

<div id="Setup-boxs" *ngIf="selectedTab === 'Setup-boxs'" class="mb-4">
  <div [hidden]="valueSetupBox!=='Customers-Set-Topbox'">
    <div class="row mt-4 mx-1">
      <div class="col-md-3">
        <div class="search">
          <form class="form">
            <label for="search">
              <input #input (keyup)="applyFilter($event)" required="" autocomplete="off" placeholder="Search"
                id="search" type="text" />

              <div class="icon">
                <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                  xmlns="http://www.w3.org/2000/svg" class="swap-on">
                  <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round" stroke-linecap="round">
                  </path>
                </svg>
              </div>
              <button (click)="reloadsettopbox()" type="reset" class="close-btn">
                <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                  <path clip-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    fill-rule="evenodd"></path>
                </svg>
              </button>
            </label>
          </form>
        </div>
      </div>

    </div>

    <mat-card-content>
      <div class="example-container text-nowrap mt-3"
        style="overflow-x: scroll; scrollbar-width: thin; margin-left: 23px">
        <table id="season-tble" matSort mat-table [dataSource]="dataSource" class="mat-elevation-z8">
          <ng-container matColumnDef="Sno">
            <th mat-header-cell *matHeaderCellDef>S.N</th>
            <td mat-cell *matCellDef="let data; let i = index">{{ i + 1 }}</td>
          </ng-container>

          <ng-container matColumnDef="stb">
            <th mat-header-cell *matHeaderCellDef>
              Setupbox Number
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.stbId?.setupBoxNumber }}
            </td>
          </ng-container>

          <ng-container matColumnDef="mso">
            <th mat-header-cell *matHeaderCellDef>
              Service Provider Name
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.stbId?.service?.serviceProviderName }}
            </td>
          </ng-container>

          <ng-container matColumnDef="region">
            <th mat-header-cell *matHeaderCellDef>
              Region
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.stbId?.regionEntity?.stateName }}
            </td>
          </ng-container>



          <ng-container matColumnDef="duestatus">
            <th mat-header-cell *matHeaderCellDef>
              Due Status
            </th>
            <td mat-cell *matCellDef="let data">
              <span *ngIf="data.dueStatus == 'ON'" style="
                  color: green;
                  background-color: rgb(177, 243, 177);
                  border-radius: 5px;
                  padding: 5px;
                  cursor: pointer;
                ">ON</span>

              <span *ngIf="data.dueStatus == 'OFF'" style="
                  color: red;
                  background-color: antiquewhite;
                  border-radius: 5px;
                  padding: 5px;
                  cursor: pointer;
                ">OFF</span>
            </td>
          </ng-container>




          <ng-container matColumnDef="viewplan">
            <th [hidden]="valuesetview!=='Customers-Set-Topbox View'" mat-header-cell *matHeaderCellDef>
              View Plan
            </th>
            <td [hidden]="valuesetview!=='Customers-Set-Topbox View'" mat-cell *matCellDef="let data">
              <button style="cursor: pointer; background: none; border: none" (click)="view(data.customerStbId)">
                <i class="fas fa-eye" style="font-size: 16px; color: rgb(39, 39, 95)"></i>
              </button>
            </td>
          </ng-container>









          <ng-container matColumnDef="createdby">
            <th mat-header-cell *matHeaderCellDef>
              Created By
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.createdBy }}
            </td>
          </ng-container>

          <ng-container matColumnDef="createdat">
            <th mat-header-cell *matHeaderCellDef>
              Created At
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.createdAt | date : "dd/MM/yyyy hh:mm a" }}
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          <tr *matNoDataRow>
            <td class="mat-cell" colspan="0" *ngIf="searchPerformed">
              No Data
            </td>
            <td class="mat-cell" colspan="0" *ngIf="!searchPerformed && dataSource.data.length === 0">
              No Data
            </td>
          </tr>
        </table>
      </div>
    </mat-card-content>
    <mat-card-footer>
      <mat-paginator style="margin-left: 23px" [pageSizeOptions]="[3, 5, 10, 20, 50, 100]" showFirstLastButtons
        aria-labels="select page of users"></mat-paginator>
    </mat-card-footer>

  </div>

</div>


<!-- Transaction -->

<div id="Transaction" *ngIf="selectedTab === 'Transaction'" class="mb-4">
  <div>
    <div class="row mt-2 mx-1">
      <div class="col">
        <div class="search">
          <form class="form">
            <label for="search">
              <input #input required autocomplete="off" placeholder="Search" id="search" type="text" name="search"
                [(ngModel)]="currentfilval" />
              <div class="icon">
                <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                  xmlns="http://www.w3.org/2000/svg" class="swap-on">
                  <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round" stroke-linecap="round">
                  </path>
                </svg>
              </div>
              <button (click)="reload()" type="reset" class="close-btn">
                <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                  <path clip-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    fill-rule="evenodd"></path>
                </svg>
              </button>
            </label>
          </form>
        </div>
        &nbsp;&nbsp;&nbsp;
        <button (click)="customerpay(currentfilval)" style="
            color: white;
            background-color: #141e46;
            border-radius: 10px;
            font-size: 12px;
          " mat-raised-button>
          Go
        </button>
      </div>
    </div>

    <mat-card-content>
      <div class="example-container text-nowrap mt-3"
        style="overflow-x: scroll; scrollbar-width: thin; margin-left: 23px">
        <table id="season-tble" matSort mat-table [dataSource]="dataSourceTransaction" class="mat-elevation-z8">
          <ng-container matColumnDef="sno">
            <th mat-header-cell *matHeaderCellDef>S.No</th>
            <td mat-cell *matCellDef="let data; let i = index">{{ i + 1 }}</td>
          </ng-container>

          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>
              Payment Id
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.pgPaymentId || "-" }}
            </td>
          </ng-container>

          <ng-container matColumnDef="numbers">
            <th mat-header-cell *matHeaderCellDef>
              STB Number
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.stbNumber }}
            </td>
          </ng-container>

          <ng-container matColumnDef="amounts">
            <th mat-header-cell *matHeaderCellDef>
              Due Amount
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.paidAmount || "-" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="method">
            <th mat-header-cell *matHeaderCellDef>
              Payment Method
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.paymentMethod || "-" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="paymenstats">
            <th mat-header-cell *matHeaderCellDef>
              Payment Status
            </th>
            <td mat-cell *matCellDef="let data">
              <span *ngIf="data.paymentStatus == 'Success'" style="color: green"><b>{{ data?.paymentStatus }}</b></span>
              <span *ngIf="data.paymentStatus == 'Due Pending'" style="color: orange"><b>{{ data?.paymentStatus
                  }}</b></span>
              <span *ngIf="data.paymentStatus == 'Failure'" style="color: red"><b>{{ data?.paymentStatus }}</b></span>
              <span *ngIf="data.paymentStatus == 'Initiated'" style="color: blue"><b>{{ data?.paymentStatus
                  }}</b></span>
              <span *ngIf="data.paymentStatus == 'Due Cancelled'" style="color: darkred"><b>{{ data?.paymentStatus
                  }}</b></span>
              <span *ngIf="data.paymentStatus == 'Payment Incomplete'" style="color: darkred"><b>{{ data?.paymentStatus
                  }}</b></span>
            </td>
          </ng-container>


          <ng-container matColumnDef="generatedat">
            <th mat-header-cell *matHeaderCellDef>
              Due Generated At
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.createdDateTime | date : "dd/MM/yyyy hh:mm a" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="paidat">
            <th mat-header-cell *matHeaderCellDef>
              Paid At
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.paymentDateTime | date : "dd/MM/yyyy hh:mm a" }}
            </td>
          </ng-container>

          <ng-container matColumnDef="receipts">
            <th [hidden]="valuetransreceipt !== 'Transactions-Receipt'" mat-header-cell *matHeaderCellDef>
              Reciept
            </th>
            <td [hidden]="valuetransreceipt !== 'Transactions-Receipt'" mat-cell *matCellDef="let data">
              <button class="btn btn-success btn-sm" [disabled]="data.paymentStatus != 'Success'"
                style="border: none; font-size: 12px" (click)="Receipt(data.customerPayId)">
                <i class="fas fa-receipt" style="color: #fff"></i>
              </button>
            </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedColumnsTransaction; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsTransaction"></tr>
          <tr *matNoDataRow>
            <td class="mat-cell" colspan="0" *ngIf="searchPerformed">
              No Data
            </td>
            <td class="mat-cell" colspan="0" *ngIf="
                !searchPerformed && dataSourceTransaction.data.length === 0
              ">
              No Data
            </td>
          </tr>
        </table>
      </div>
    </mat-card-content>
    <mat-card-footer>
      <mat-paginator style="margin-left: 23px" (page)="getData($event)" [length]="totalPages" [pageIndex]="currentpage"
        [pageSize]="totalpage" [pageSizeOptions]="[3, 5, 50, 100, 500, 1000]" aria-label="Select page">
      </mat-paginator>
    </mat-card-footer>
  </div>

</div>

<!--Additional-->

<div id="Additional" *ngIf="selectedTab === 'Additional-Payments'" class="mb-4">
  <div>
    <div class="row mt-2 mx-auto">
      <div class="col-md-3">
        <div class="search">
          <form class="form">
            <label for="search">
              <input #input required autocomplete="off" placeholder="Search" id="search" type="text" name="search"
                [(ngModel)]="currentfilvaladd" />
              <div class="icon">
                <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                  xmlns="http://www.w3.org/2000/svg" class="swap-on">
                  <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round" stroke-linecap="round">
                  </path>
                </svg>
              </div>
              <button (click)="reloadadd()" type="reset" class="close-btn">
                <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                  <path clip-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    fill-rule="evenodd"></path>
                </svg>
              </button>
            </label>
          </form>
        </div>
        &nbsp;&nbsp;&nbsp;
      </div>

      <div class="col-md-1">
        <button (click)="customerpayadd(currentfilvaladd)" style="
            color: white;
            background-color: #141e46;
            border-radius: 10px;
            font-size: 12px;
          " mat-raised-button>
          Go
        </button>
        &nbsp;
      </div>
      &nbsp;

    </div>

    <mat-card-content>
      <div class="example-container text-nowrap" style="overflow-x: scroll; scrollbar-width: thin; margin-left: 23px">
        <table id="season-tble" matSort mat-table [dataSource]="dataSourceAdditional" class="mat-elevation-z8">
          <ng-container matColumnDef="snoadd">
            <th mat-header-cell *matHeaderCellDef>S.No</th>
            <td mat-cell *matCellDef="let data; let i = index">{{ i + 1 }}</td>
          </ng-container>

          <ng-container matColumnDef="Category">
            <th mat-header-cell *matHeaderCellDef>
              Stock Category
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.stockCategory }}
            </td>
          </ng-container>

          <ng-container matColumnDef="Quantity">
            <th mat-header-cell *matHeaderCellDef>
              Stock Quantity
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.quantity }}
            </td>
          </ng-container>

          <ng-container matColumnDef="Amount">
            <th mat-header-cell *matHeaderCellDef>
              Service Amount
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.paidAmount.toFixed(2) }}
            </td>
          </ng-container>

          <ng-container matColumnDef="Id">
            <th mat-header-cell *matHeaderCellDef>
              Payment Id
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.pgPaymentId || "--" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Reference">
            <th mat-header-cell *matHeaderCellDef>
              Bank Reference
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.bankReference || "--" }}
            </td>
          </ng-container>

          <ng-container matColumnDef="Method">
            <th mat-header-cell *matHeaderCellDef>
              Payment Method
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data.paymentMethod || "--" }}
            </td>
          </ng-container>


          <ng-container matColumnDef="Status">
            <th mat-header-cell *matHeaderCellDef>
              Payment Status
            </th>
            <td mat-cell *matCellDef="let data">
              <span *ngIf="data?.paymentStatus == 'Success'" class="text-success">
                {{ data?.paymentStatus }}</span>
              <span *ngIf="data?.paymentStatus == 'Due Pending'" class="text-warning">
                Payment Pending
              </span>
              <span *ngIf="data?.paymentStatus == 'Initiated'" class="text-primary">
                {{ data?.paymentStatus }}</span>
              <span *ngIf="data?.paymentStatus == 'Failure'" class="text-danger">
                {{ data?.paymentStatus }}</span>
              <span *ngIf="data?.paymentStatus == 'Due Cancelled'" class="text-danger">
                {{ data?.paymentStatus }}</span>
              <span *ngIf="data?.paymentStatus == 'Payment Incomplete'" class="text-danger">
                {{ data?.paymentStatus }}</span>
            </td>
          </ng-container>
          <ng-container matColumnDef="Reciepts">
            <th [hidden]="valueaddinvoice!=='Customers-Additional Payments Receipt'" mat-header-cell *matHeaderCellDef>
              Reciept
            </th>
            <td [hidden]="valueaddinvoice!=='Customers-Additional Payments Receipt'" mat-cell *matCellDef="let data">
              <button class="btn btn-success btn-sm" [disabled]="data?.paymentStatus != 'Success'" style="border: none"
                (click)="viewreciept(data?.customerpaymentId)">
                <i class="fa-solid fa-download" style="color: #fff"></i>
              </button>
            </td>
          </ng-container>
          <ng-container matColumnDef="Paid">
            <th mat-header-cell *matHeaderCellDef>
              Paid At
            </th>
            <td mat-cell *matCellDef="let data">
              {{ data?.paymentDateTime | date : "dd/MM/yyyy hh:mm" }}
            </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedColumnsAdditional; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsAdditional"></tr>
          <tr *matNoDataRow>
            <td class="mat-cell" colspan="0" *ngIf="searchPerformed">
              No Data
            </td>
            <td class="mat-cell" colspan="0" *ngIf="!searchPerformed && dataSourceAdditional.data.length === 0">
              No Data
            </td>
          </tr>
        </table>
      </div>
    </mat-card-content>
    <mat-card-footer>
      <mat-paginator style="margin-left: 23px" (page)="getDataAdditional($event)" [length]="totalPages"
        [pageIndex]="currentpage" [pageSize]="totalpage" [pageSizeOptions]="[3, 5, 50, 100, 500, 1000]"
        aria-label="Select page">
      </mat-paginator>
    </mat-card-footer>
  </div>

</div>


<div id="refund" *ngIf="selectedTab === 'Refund'" class="mb-4">
  <div *ngIf="selectedTransactionType == 'Due Transaction'">
    <div>
      <div class="row mt-4 mx-1">
        <div class="col-3" style="margin-right: -14px">
          <select (change)="transactionsDropdown($event)" class="form-select">
            <option [selected]="selectedTransactionType == 'Due Transaction'" value="Due Transaction">
              Due Transaction
            </option>
            <option value="Additional Transaction">Additional Transaction</option>
          </select>
        </div>
        <div class="col">
          <div class="search">
            <form class="form">
              <label for="search">
                <input #input (keyup)="applyFilterRefund($event)" required="" autocomplete="off" placeholder="Search"
                  id="search" type="text" />

                <div class="icon">
                  <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg" class="swap-on">
                    <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round"
                      stroke-linecap="round"></path>
                  </svg>
                </div>
                <button type="reset" (click)="reloadrefunds()" class="close-btn">
                  <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                    <path clip-rule="evenodd"
                      d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                      fill-rule="evenodd"></path>
                  </svg>
                </button>
              </label>
            </form>
          </div>
          &nbsp;
        </div>
      </div>
      <mat-card-content>
        <div class="example-container text-nowrap mt-3"
          style="overflow-x: scroll; scrollbar-width: thin; margin-left: 23px">
          <table id="season-tble" matSort mat-table [dataSource]="dataSourceRefund" class="mat-elevation-z8">
            <ng-container matColumnDef="Snos">
              <th mat-header-cell *matHeaderCellDef>S.No</th>
              <td mat-cell *matCellDef="let data; let i = index">{{ i + 1 }}</td>
            </ng-container>

            <ng-container matColumnDef="stbs">
              <th mat-header-cell *matHeaderCellDef>
                Setupbox Number
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.paymentModel?.customerStbId?.stbId?.setupBoxNumber }}
              </td>
            </ng-container>

            <ng-container matColumnDef="Types">
              <th mat-header-cell *matHeaderCellDef>
                Type
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.typeMode }}
              </td>
            </ng-container>

            <ng-container matColumnDef="Requestid">
              <th mat-header-cell *matHeaderCellDef>
                Request ID
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.requestId || "--" }}
              </td>
            </ng-container>

            <ng-container matColumnDef="Paymentid">
              <th mat-header-cell *matHeaderCellDef>
                Payment Id
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.paymentId || "--" }}
              </td>
            </ng-container>
            <ng-container matColumnDef="Paidamount">
              <th mat-header-cell *matHeaderCellDef>
                Paid Amount
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.paymentModel?.paidAmount }}
              </td>
            </ng-container>
            <ng-container matColumnDef="Refundsamount">
              <th mat-header-cell *matHeaderCellDef>
                Refund Amount
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.refundAmount || "--" }}
              </td>
            </ng-container>
            <ng-container matColumnDef="Refundstatus">
              <th mat-header-cell *matHeaderCellDef>
                Refund Status
              </th>
              <td mat-cell *matCellDef="let data">
                <span *ngIf="data?.refundStatus == 'INITIATED'" style="color:#FFC107 ;">INITIATED</span>
                <span *ngIf="data?.refndstatus == 'PENDING'" style="color:#FF9800;">PENDING</span>
                <span *ngIf="data?.refundStatus == 'SUBMITTED'" style="color:blue">SUBMITTED</span>
                <span *ngIf="data?.refundStatus == 'COMPLETED'" style="color:#4CAF50">COMPLETED</span>
                <span *ngIf="data?.refundStatus == 'FAILED'" style="color:#F44336 ">FAILED</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="Offline">
              <th [hidden]="vaaluedetails!=='Refunds-View'" mat-header-cell *matHeaderCellDef>
                OfflineDetails
              </th>
              <td [hidden]="vaaluedetails!=='Refunds-View'" mat-cell *matCellDef="let data">
                <button (click)="offline(data)" style="border: none; background: none"
                  [disabled]="data?.typeMode != 'Offline'">
                  <i class="fa fa-eye" style="border: none; background: none; font-size: 14px"></i>
                </button>
              </td>
            </ng-container>

            <ng-container matColumnDef="RequestedsAt">
              <th mat-header-cell *matHeaderCellDef>
                Requested At
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.createdAt | date : "dd/MM/yyyy hh:mm a" }}
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumnsRefund; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsRefund"></tr>
            <tr *matNoDataRow>
              <td class="mat-cell" colspan="0" *ngIf="searchPerformed">
                No Data
              </td>
              <td class="mat-cell" colspan="0" *ngIf="!searchPerformed && dataSourceRefund.data.length === 0">
                No Data
              </td>
            </tr>
          </table>
        </div>
      </mat-card-content>
      <mat-card-footer>
        <mat-paginator style="margin-left: 23px" [pageSizeOptions]="[3, 5, 10, 20, 50, 100]" showFirstLastButtons
          aria-labels="select page of users"></mat-paginator>
      </mat-card-footer>
    </div>
  </div>

  <div *ngIf="selectedTransactionType == 'Additional Transaction'">
    <div>
      <div class="row mt-4 mx-1">
        <div class="col-3" style="margin-right: -14px">
          <select (change)="transactionsDropdown($event)" class="form-select">
            <option value="Due Transaction">Due Transaction</option>
            <option [selected]="selectedTransactionType == 'Additional Transaction'" value="Additional Transaction">
              Additional Transaction
            </option>
          </select>
        </div>
        <div class="col">
          <div class="search">
            <form class="form">
              <label for="search">
                <input #input (keyup)="applyFilterRefundAdd($event)" required="" autocomplete="off" placeholder="Search"
                  id="search" type="text" />

                <div class="icon">
                  <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg" class="swap-on">
                    <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round"
                      stroke-linecap="round"></path>
                  </svg>
                </div>
                <button type="reset" (click)="reloadrefundadd()" class="close-btn">
                  <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                    <path clip-rule="evenodd"
                      d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                      fill-rule="evenodd"></path>
                  </svg>
                </button>
              </label>
            </form>
          </div>
          &nbsp;
        </div>
      </div>
      <mat-card-content>
        <div class="example-container text-nowrap mt-3"
          style="overflow-x: scroll; scrollbar-width: thin; margin-left: 23px">
          <table id="season-tble" matSort mat-table [dataSource]="dataSourceRefundAdditional" class="mat-elevation-z8">
            <ng-container matColumnDef="Snos">
              <th mat-header-cell *matHeaderCellDef>S.No</th>
              <td mat-cell *matCellDef="let data; let i = index">{{ i + 1 }}</td>
            </ng-container>

            <ng-container matColumnDef="category">
              <th mat-header-cell *matHeaderCellDef>
                Stock Category
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.customerOtherPayment?.inventoryNameCreate?.inventoryName }}
              </td>
            </ng-container>

            <ng-container matColumnDef="quantity">
              <th mat-header-cell *matHeaderCellDef>
                Stock Quantity
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.customerOtherPayment?.quantity }}
              </td>
            </ng-container>

            <ng-container matColumnDef="Types">
              <th mat-header-cell *matHeaderCellDef>
                Type
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.typeMode }}
              </td>
            </ng-container>

            <ng-container matColumnDef="Requestid">
              <th mat-header-cell *matHeaderCellDef>
                Request ID
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.requestId || "--" }}
              </td>
            </ng-container>

            <ng-container matColumnDef="Paymentid">
              <th mat-header-cell *matHeaderCellDef>
                Payment Id
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.paymentId || "--" }}
              </td>
            </ng-container>
            <ng-container matColumnDef="Paidamount">
              <th mat-header-cell *matHeaderCellDef>
                Paid Amount
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.customerOtherPayment?.paidAmount.toFixed(2) }}
              </td>
            </ng-container>
            <ng-container matColumnDef="Refundsamount">
              <th mat-header-cell *matHeaderCellDef>
                Refund Amount
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.refundAmount || "--" }}
              </td>
            </ng-container>
            <ng-container matColumnDef="Refundstatus">
              <th mat-header-cell *matHeaderCellDef>
                Refund Status
              </th>
              <td mat-cell *matCellDef="let data">
                <span *ngIf="data?.refundStatus == 'INITIATED'" style="color:#FFC107 ;">INITIATED</span>
                <span *ngIf="data?.refndstatus == 'PENDING'" style="color:#FF9800;">PENDING</span>
                <span *ngIf="data?.refundStatus == 'SUBMITTED'" style="color:blue">SUBMITTED</span>
                <span *ngIf="data?.refundStatus == 'COMPLETED'" style="color:#4CAF50">COMPLETED</span>
                <span *ngIf="data?.refundStatus == 'FAILED'" style="color:#F44336 ">FAILED</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="Offline">
              <th [hidden]="vaaluedetails !== 'Refunds-View'" mat-header-cell *matHeaderCellDef>
                OfflineDetails
              </th>
              <td [hidden]="vaaluedetails !== 'Refunds-View'" mat-cell *matCellDef="let data">
                <button (click)="offline(data)" style="border: none; background: none"
                  [disabled]="data?.typeMode != 'Offline'">
                  <i class="fa fa-eye" style="border: none; background: none; font-size: 14px"></i>
                </button>
              </td>
            </ng-container>

            <ng-container matColumnDef="RequestedsAt">
              <th mat-header-cell *matHeaderCellDef>
                Requested At
              </th>
              <td mat-cell *matCellDef="let data">
                {{ data?.createdAt | date : "dd/MM/yyyy hh:mm a" }}
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumnsRefundAdditional; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsRefundAdditional"></tr>
            <tr *matNoDataRow>
              <td class="mat-cell" colspan="0" *ngIf="searchPerformed">
                No Data
              </td>
              <td class="mat-cell" colspan="0" *ngIf="!searchPerformed && dataSourceRefundAdditional.data.length === 0">
                No Data
              </td>
            </tr>
          </table>
        </div>
      </mat-card-content>
      <mat-card-footer>
        <mat-paginator style="margin-left: 23px" [pageSizeOptions]="[3, 5, 10, 20, 50, 100]" showFirstLastButtons
          aria-labels="select page of users"></mat-paginator>
      </mat-card-footer>
    </div>
  </div>

</div>