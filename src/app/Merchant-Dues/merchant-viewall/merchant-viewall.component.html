<!--   -->

<h4 style="text-align:left;color:#141E46;"> Cloud Fees</h4>
<mat-card-header>
  <div class="row mt-4" >
   
      <div class="col" >
   
        <div class="search">
          <form class="form">
            <label for="search">
              <input #input required autocomplete="off" placeholder="Search"
                     id="search" type="text">
              <div class="icon">
                  <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                       xmlns="http://www.w3.org/2000/svg" class="swap-on">
                      <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round"
                            stroke-linecap="round"></path>
                  </svg>
              </div>
              <button (click)="reload()" type="reset" class="close-btn">
                  <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                      <path clip-rule="evenodd"
                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                            fill-rule="evenodd"></path>
                  </svg>
              </button>
          </label>
 
          </form>
   
      </div>&nbsp;&nbsp;&nbsp;
      <button (click)="Subscription(this.merchantId,input.value)" style="color:white;background-color: #141E46;border-radius: 10px;" mat-raised-button>Go</button>
      &nbsp;
        <!-- <button style="color:white;background-color: #141E46;border-radius: 10px;" class="custom-btn btn-10 me-3"
                  data-bs-toggle="modal" data-bs-target="#ApprovalEdits" mat-raised-button (click)="add()">Create</button> -->
        <button style="color:white;background-color: #141E46;border-radius: 10px;" (click)="exportexcel()"
          mat-raised-button [hidden]="valueduesExport!=='Subscription-Export'">Export</button>
       
      </div>
   
  </div>
  </mat-card-header>
<!-- <mat-card> -->
  <mat-card-content>
    <div class="table-responsive text-nowrap mt-4" style="overflow-x: scroll; scrollbar-width: thin">
      <!-- <span *ngIf="showcategoryData" class="errormge">NO DATA FOUND</span> -->
      <table id="season-tble" matSort mat-table [dataSource]="dataSource" class="mat-elevation-z1">
        <ng-container matColumnDef="sno">
          <th mat-header-cell *matHeaderCellDef>S.No</th>
          <td mat-cell *matCellDef="let data; let i = index">
            {{ i + 1 }}
          </td>
        </ng-container>
        <ng-container matColumnDef="paymentId">
          <th mat-header-cell *matHeaderCellDef>Payment ID</th>
          <td mat-cell *matCellDef="let transaction">{{ transaction?.pgPaymentId || "-" }}</td>
      </ng-container>
     
   
        <ng-container matColumnDef="planname">
          <th mat-header-cell *matHeaderCellDef>Plan Name</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.merchantId?.merchantPlanModel?.planName }}
          </td>
        </ng-container>
   
        <ng-container matColumnDef="PlanType">
          <th mat-header-cell *matHeaderCellDef>Plan Type</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.merchantId?.merchantPlanModel?.frequency }}
          </td>
        </ng-container>
   
   
        <ng-container matColumnDef="startDate">
          <th mat-header-cell *matHeaderCellDef>Start date</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.startDate  | date : "dd-MM-yyyy" }}
          </td>
        </ng-container>
   
        <ng-container matColumnDef="endDate">
          <th mat-header-cell *matHeaderCellDef>End Date</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.endDate  | date : "dd-MM-yyyy" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="createdDateTime">
          <th mat-header-cell *matHeaderCellDef>Due Generated At</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.createdDateTime  | date : "dd-MM-yyyy hh:mm a" }}
          </td>
        </ng-container>
        <ng-container matColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef>MMC Cost</th>
          <td mat-cell *matCellDef="let transaction">{{transaction?.paidAmount}}</td>
      </ng-container>
      <ng-container matColumnDef="igstPercentage">
        <th mat-header-cell *matHeaderCellDef>IGST</th>
        <td mat-cell *matCellDef="let transaction">{{transaction?.igstPercentage}}</td>
    </ng-container>
      <ng-container matColumnDef="cgstPercentage">
        <th mat-header-cell *matHeaderCellDef>CGST</th>
        <td mat-cell *matCellDef="let transaction">{{transaction?.cgstPercentage}}</td>
    </ng-container>
    <ng-container matColumnDef="sgstPercentage">
      <th mat-header-cell *matHeaderCellDef>SGST</th>
      <td mat-cell *matCellDef="let transaction">{{transaction?.sgstPercentage}}</td>
  </ng-container>
  <!-- <ng-container matColumnDef="totalPayableAmount">
    <th mat-header-cell *matHeaderCellDef>Total Amount</th>
    <td mat-cell *matCellDef="let transaction">{{transaction?.totalPayableAmount}}</td>
  </ng-container> -->
   
   
        <ng-container matColumnDef="paymentStatus">
          <th mat-header-cell *matHeaderCellDef>Payment Status</th>
          <td mat-cell *matCellDef="let data">
            <span *ngIf="data?.paymentStatus=='Success'" style="color:green;"><b>Success</b></span>
            <span *ngIf="data?.paymentStatus=='Due Pending'" style="color:orange;"><b>Pending</b></span>
            <span *ngIf="data?.paymentStatus=='Failure'" style="color:red;"><b>Failure</b></span>
            <span *ngIf="data?.paymentStatus=='Initiated'" style="color:blue;"><b>Initiated</b></span>
          </td>
        </ng-container>
   
        <ng-container matColumnDef="Paidamount">
          <th mat-header-cell *matHeaderCellDef>Total Payable Amount</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.totalPayableAmount }}
          </td>
        </ng-container>

        <ng-container matColumnDef="smsTotalAmount">
          <th mat-header-cell *matHeaderCellDef>SMS Cost</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.smsTotalAmount }}
          </td>
        </ng-container>
   
        <ng-container matColumnDef="view">
          <th mat-header-cell *matHeaderCellDef [hidden]="valueDuesview!=='Subscription-View'">View</th>
          <td mat-cell *matCellDef="let data" [hidden]="valueDuesview!=='Subscription-View'">
            <i class="fa fa-eye" (click)="view(data.maintenancePayId)"></i>
          </td>
        </ng-container>
   
        <ng-container matColumnDef="dues">
          <th mat-header-cell *matHeaderCellDef [hidden]="valueDuespayment!=='Subscription-Pay'">Payment</th>
          <td mat-cell *matCellDef="let data" [hidden]="valueDuespayment!=='Subscription-Pay'">
            <button style="width:50px;padding:0px;" class="btn" [disabled]="data.paymentStatus === 'Success'" (click)="submit(data)">
              <p>  Pay </p>
            </button>
          </td>
        </ng-container>
   
        <ng-container matColumnDef="invoice">
          <th mat-header-cell *matHeaderCellDef [hidden]="valueDuesInvoice!=='Subscription-Invoice'">Invoice</th>
          <td  mat-cell *matCellDef="let data" [hidden]="valueDuesInvoice!=='Subscription-Invoice'">
            <button class="btn" style="background-color: green; border: none; color:white; width:45px;padding:0px" [disabled]="data.paymentStatus!='Success'"><i (click)="invoice(data.maintenancePayId)"
                style="font-size: 15px;" class="fa fa-download" aria-hidden="true"></i></button>
          </td>
        </ng-container>
        <!-- <i style="font-size: 10px;" class="fa fa-credit-card" aria-hidden="true"></i> -->
   
   
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row;columns:displayedColumns"></tr>
        <tr *matNoDataRow>
          <td class="mat-cell" colspan="4">No Data For  {{input.value}}
          </td>
   
        </tr>
      </table>
   
    </div>
  </mat-card-content>
<mat-card-footer>

  <mat-paginator [pageSizeOptions]="[5,10,20,50,100]" showFirstLastButtons
    aria-labels="select page of users"></mat-paginator>

</mat-card-footer>





<!-- payment flow form  -->

<form name="form" id="FormType" action="https://connect.basispay.in/checkout" method="POST">
  <!-- <form name="form" id="FormType" action="https://staging-connect.basispay.in/checkout" method="POST"> -->
  <div style="display: none">
    <div class="row">
      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="address" [(ngModel)]="billaddress" />
        </div>
      </div>
      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="apiKey" [(ngModel)]="apikey" />
        </div>
      </div>
      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="city" [(ngModel)]="city" />
        </div>
      </div>
      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="country" value="IND" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="customerEmail" [(ngModel)]="email" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="customerMobile" [(ngModel)]="mobile" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="customerName" [(ngModel)]="entityname" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="deliveryAddress" value="" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="deliveryCity" value="" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="deliveryCountry" value="" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="deliveryMobile" value="" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="deliveryName" value="" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="deliveryPostalCode" value="" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="deliveryRegion" value="" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="orderReference" [(ngModel)]="orderref" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="postalCode" [(ngModel)]="postalcode" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="region" [(ngModel)]="statename" />
        </div>
      </div>

      <div class="col-4">
        <div class="mb-3">
          <input type="hidden" name="secureHash" [(ngModel)]="securehash" />
        </div>
      </div>
    </div>
  </div>
</form>

<!-- payment flow form  -->