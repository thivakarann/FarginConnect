<mat-card-header>
  <div class="row  d-flex justify-content-start">
    <div class="col-md-6">
      <h5>Customer Name: {{ viewcustomer?.customerName }}</h5>
    </div>
    <!-- <div class="col-md-4  mt-1">
      <h6> Overall Plan Amount: <span style="color:green;">â‚¹{{ this.totalamounts }}</span></h6>
    </div> -->
    <div class="col-md-6 d-flex justify-content-end mb-1">
      <button class="button1" (click)="close()">Back</button>
    </div>

  </div>
</mat-card-header>

<ul class="nav nav-pills nav-fill mb-4 mx-3 mt-3"
  [hidden]="valuecustomerinfo!=='Customer-Customer Information' && valuecustomerplan!=='Customer-Setup-box' && valuecustomertransaction!=='Customer-Transaction'">
  <li class="nav-item" [hidden]="valuecustomerinfo!=='Customer-Customer Information'">
    <a style="cursor: pointer;font-weight: 600;" class="nav-link" [class.active]="selectedTab === 'customer-info'"
      (click)="selectTab('customer-info')">
      Customer Info
    </a>
  </li>
  &nbsp; &nbsp;
  <li class="nav-item" [hidden]="valuecustomerplan!=='Customer-Setup-box'">
    <a style="cursor: pointer;font-weight: 600;" class="nav-link" [class.active]="selectedTab === 'Setup-box'"
      (click)="selectTab('Setup-box')">
      Setup-box
    </a>
  </li>
  &nbsp; &nbsp;
  <li class="nav-item" [hidden]="valuecustomertransaction!=='Customer-Transaction'">
    <a style="cursor: pointer;font-weight: 600;" class="nav-link" [class.active]="selectedTab === 'Transaction'"
      (click)="selectTab('Transaction')">
      Transactions
    </a>
  </li>
  &nbsp;&nbsp;
  <li class="nav-item" [hidden]="valueAdditionalPayments!=='Customer-Additional Payments'">
    <a style="cursor: pointer;font-weight: 600;" class="nav-link" [class.active]="selectedTab === 'Additional-Payments'"
      (click)="selectTab('Additional-Payments')">
      Additional Payments
    </a>
  </li>
  &nbsp;&nbsp;<li class="nav-item" [hidden]="valueRefunds!=='Customer-Refunds'">
    <a style="cursor: pointer;font-weight: 600;" class="nav-link" [class.active]="selectedTab === 'Refund'"
      (click)="selectTab('Refund')">
     Refunds
    </a>
  </li>
</ul>

<div *ngIf="selectedTab === 'customer-info'" id="customer-info" class="mb-4">
  <div class="container">
    <article class="card">
      <div class="card-body">
        <!-- <h3 class="card-title mb-4">General Information</h3>
              <hr> -->
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-6 col-12">
              <div class="d-flex flex-column">
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">
                    Customer Id:</div>
                  <div class="w-50">{{ viewcustomer?.customerReferenceId || '-' }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">
                    Customer Name:</div>
                  <div class="w-50">{{ viewcustomer?.customerName || '-' }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">
                    Email Address</div>
                  <div class="w-50">{{ viewcustomer?.emailAddress || '-' }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Mobile Number:
                  </div>
                  <div class="w-50">{{ viewcustomer?.mobileNumber || '-' }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Age:</div>
                  <div class="w-50">{{ viewcustomer?.age || '-' }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Area:</div>
                  <div class="w-50"> {{ viewcustomer?.area || '-' }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Street Name:</div>
                  <div class="w-50">{{ viewcustomer?.streetName || '-' }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Country
                  </div>
                  <div class="w-50">{{ viewcustomer?.countryName || '-' }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">State Name:</div>
                  <div class="w-50"> {{ viewcustomer?.stateName || '-' }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Branch Name:</div>
                  <div class="w-50"> {{ viewcustomer?.branchId?.branchName || '-' }}</div>
                </div>

                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">City Name:</div>
                  <div class="w-50">{{ viewcustomer?.cityName || '-' }}</div>
                </div>


                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Pincode</div>
                  <div class="w-50">{{ viewcustomer?.pincodeName || '-' }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Land Mark:</div>
                  <div class="w-50">{{ viewcustomer?.landmark || '-' }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Advance Paid:</div>
                  <div class="w-50">
                    <div class="w-50">{{ viewcustomer?.advanceStatus || '-' }}</div>
                  </div>
                </div>



              </div>
            </div>


            <div class="col-md-6 col-12">
              <div class="d-flex flex-column">


                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">MSO-Customer ID:</div>
                  <div class="w-50">
                    <div class="w-50">{{ viewcustomer?.customerMsoId || '-' }}</div>
                  </div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Flat Number:</div>
                  <div class="w-50">{{ viewcustomer?.flatNumber || '-' }}</div>
                </div>

                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Block Number:</div>
                  <div class="w-50">{{ viewcustomer?.blockNumber || '-'  }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">House Name:</div>
                  <div class="w-50"> {{ viewcustomer?.houseName || '-'  }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Door Number:</div>
                  <div class="w-50"> {{ viewcustomer?.doorNumber || '-'  }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Alternative Mobile Number:</div>
                  <div class="w-50"> {{ viewcustomer?.alterMobileNumber || '-'  }}</div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Apartment Name:</div>
                  <div class="w-50"> {{ viewcustomer?.apartmentName || '-' }}</div>
                </div>


                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Advance Amount:</div>
                  <div class="w-50">
                    {{viewcustomer?.advanceAmount || 0.0}}
                  </div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Connection Type:</div>
                  <div class="w-50">
                    <div class="w-50"> {{ viewcustomer?.freeLine || '-' }}</div>
                  </div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Branch Status:</div>
                  <div class="w-50"> {{ viewcustomer?.branchStatus || '-' }}</div>
                </div>

                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Created At:</div>
                  <div class="w-50">
                    <div class="w-50"> {{ viewcustomer?.createdDateTime|date:"dd/MM/yyyy" }}</div>
                  </div>
                </div>
                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Created By:</div>
                  <div class="w-50">{{ viewcustomer?.createdBy || '-' }}</div>
                </div>

                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Modified By:</div>
                  <div class="w-50">{{ viewcustomer?.modifiedBy|| '-'  }}</div>
                </div>

                <div class="d-flex mb-2">
                  <div class="w-50 font-weight-bold">Modified At:</div>
                  <div class="w-50">
                    <div class="w-50"> {{ viewcustomer?.modifiedDateTime | date:"dd/MM/yyyy" }}</div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </article>
  </div>
</div>

<!-- Transaction -->


<div id="Transaction" *ngIf="selectedTab === 'Transaction'" class="mb-4">

  <div>
    <div class="row mt-5 mx-1">
      <div class="col-md-3">
        <div class="search ">
          <form class="form">
              <label for="search">
                  <input (ngModelChange)="onSearchTextChange()" #input name="search" required autocomplete="off" placeholder="Search" id="search" type="text" [(ngModel)]="searchText">
 
                  <div class="icon">
                      <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                          xmlns="http://www.w3.org/2000/svg" class="swap-on">
                          <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round"
                              stroke-linecap="round"></path>
                      </svg>
                      <!-- <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                          xmlns="http://www.w3.org/2000/svg" class="swap-off">
                          <path d="M10 19l-7-7m0 0l7-7m-7 7h18" stroke-linejoin="round"
                              stroke-linecap="round">
                          </path>
                      </svg> -->
                  </div>
                  <button type="reset" class="close-btn">
                      <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                          <path clip-rule="evenodd"
                              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                              fill-rule="evenodd"></path>
                      </svg>
                  </button>
              </label>
          </form>
      </div>
      </div>
    </div>
    <div class="row mt-1 mx-1">
      <div class="col-12 mb-3 mb-lg-5">
        <div class="card table-nowrap table-card">
          <div class="table-responsive text-nowrap text-center">
            <table class="table table-hover" id="customers">
              <tr>

                <th>S No</th>
                <th>Payment Id</th>
                <th>Customer Id</th>

                <th>STB Number</th>
                <th>MSO</th>
                <th>Customer Name</th>
                <th>Customer Email</th>
                <th>Mobile Number</th>
                <th>Amount</th>
                <th>Payment Status</th>
                <th [hidden]="valuetransamt!=='Customer-Transaction Updated Amount'">Updated Amount</th>
                <th>Due Generated At</th>
                <th>Paid At</th>
                <th [hidden]="valuetransview!=='Customer-Transaction View'">View</th>
                <th [hidden]="valuetransReciept!=='Customer-Transaction Reciept'">Reciept</th>
                <th [hidden]="valuetransManualPayment!=='Customer-Transaction Manual Payment'">Manual Payment</th>
                <th [hidden]="valuetransRefund!=='Customer-Transaction Refund'">Refund</th>
                <th [hidden]="valuetransReverseDues!=='Customer-Transaction Reverse Dues'">Reverse Dues</th>
                <th>Reverse Status</th>
                <th>Comment By</th>
              </tr>
              <!-- <span *ngIf="!showData" class="text-center" style="color:red;font-size:12px;">NO DATA FOUND</span> -->

              <tbody *ngIf="showData">
                <tr
                  *ngFor="let row of transaction | search: searchText | paginate: { itemsPerPage: 3, currentPage: currentPage }; let i = index">

                  <td>{{ i + 1 }}</td>
                  <td> {{row.pgPaymentId || '-'}}</td>
                  <td>{{ row.customerId.customerReferenceId}}</td>

                  <td>{{ row.customerStbId.stbId.setupBoxNumber}}</td>
                  <td>{{ row.customerStbId.stbId.service.serviceProviderName}}</td>
                  <td>{{ row.customerId.customerName}}</td>
                  <td>{{ row.customerId.emailAddress}}</td>
                  <td>{{ row.customerId.mobileNumber}}</td>
                  <td>{{row.paidAmount || '-'}}</td>
                  <td>


                    <span *ngIf="row.paymentStatus=='Success'"
                      style="color:green;"><b>{{row?.paymentStatus}}</b></span>
                    <span *ngIf="row.paymentStatus=='Due Pending'"
                      style="color:orange;"><b>{{row?.paymentStatus}}</b></span>
                    <span *ngIf="row.paymentStatus=='Failure'" style="color:red;"><b>{{row?.paymentStatus}}</b></span>
                    <span *ngIf="row.paymentStatus=='Initiated'"
                      style="color:blue;"><b>{{row?.paymentStatus}}</b></span>
                      <span *ngIf="row.paymentStatus=='Due Cancelled'"
                      style="color:darkred;"><b>{{row?.paymentStatus}}</b></span>
                  </td>
                  <td [hidden]="valuetransamt!=='Customer-Transaction Updated Amount'">
                    <button class="btn btn-success btn-sm" (click)="Updatedue(row)" style="border:none;"
                      [disabled]="row.paymentStatus=='Success'">
                      <i class="fa-regular fa-money-bill-1"></i>
                    </button>
                  </td>
                  <td> {{row.createdDateTime | date:'dd/MM/yyyy hh:mm a'}}</td>
                  <td> {{row.paymentDateTime | date:'dd/MM/yyyy hh:mm a'}}</td>
                  <td [hidden]="valuetransview!=='Customer-Transaction View'">
                    <i class="fa fa-eye" (click)="view(row.customerPayId)"></i>
                  </td>
                  <td [hidden]="valuetransReciept!=='Customer-Transaction Reciept'">
                    <button class="btn btn-success btn-sm" [disabled]="row.paymentStatus!='Success'"
                      style="border:none;" (click)="Receipt(row.customerPayId)"> <i class="fas fa-receipt"
                        style="color:#fff;"></i></button>
                  </td>
                  <td [hidden]="valuetransManualPayment!=='Customer-Transaction Manual Payment'">
                    <button [disabled]="row.paymentStatus == 'Success'" class="btn btn-success btn-sm"
                      style="border:none;" (click)="manuvalpayments(row.customerPayId)"> <i
                        class="fa-solid fa-address-card" style="color:#fff;cursor:pointer"></i></button>
                  </td>
                  <td [hidden]="valuetransRefund!=='Customer-Transaction Refund'">
                    <button (click)="refund(row)"
                      [disabled]="row.pgPaymentId == null || row.paymentStatus !== 'Success'">
                      <i class="fa fa-undo"></i>
                    </button>
                  </td>
                  <td [hidden]="valuetransReverseDues!=='Customer-Transaction Reverse Dues'">
                    <button [disabled]="row.dueStatus === 1 && row.paymentStatus!='Success'" (click)="dues(row)">
                      <i style="font-size: 20px; cursor: pointer" class="fa fa-edit"></i>
                    </button>
                  </td>
                  <td>{{ row.dueStatus === 1 ? 'Dues Reversed' : 'Not Reversed' }}</td>

                  <td>
                    <span *ngIf="!isFullPolicyVisible">
                      {{ row.commentsBy | slice:0:limit }}
                    </span>
                    <span *ngIf="isFullPolicyVisible">
                      {{ row.commentsBy }}
                    </span>
                    <i style="color: #141E46;font-weight: 600;cursor: pointer;" class="read-more"
                      (click)="comment(row)">
                      <br>
                      {{ isFullPolicyVisible ? 'Read Less' : '...Read More' }}
                    </i>
                  </td>

                </tr>
              </tbody>
            </table>

          </div>

        </div>
      </div>
    </div>
    <div class="text-end">
      <pagination-controls (pageChange)="currentPage= $event"></pagination-controls>
    </div>
  </div>

</div>


<div id="Setup-box" *ngIf="selectedTab === 'Setup-box'" class="mb-4">

  <div>
    <div class="row mt-5 mx-1">
      <div class="col-md-3">
        <div class="search ">
          <form class="form">
              <label for="search">
                  <input (ngModelChange)="onSearchTextChange()" #input name="search" required autocomplete="off" placeholder="Search" id="search" type="text" [(ngModel)]="searchText">
 
                  <div class="icon">
                      <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                          xmlns="http://www.w3.org/2000/svg" class="swap-on">
                          <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round"
                              stroke-linecap="round"></path>
                      </svg>
                      <!-- <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                          xmlns="http://www.w3.org/2000/svg" class="swap-off">
                          <path d="M10 19l-7-7m0 0l7-7m-7 7h18" stroke-linejoin="round"
                              stroke-linecap="round">
                          </path>
                      </svg> -->
                  </div>
                  <button type="reset" class="close-btn">
                      <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                          <path clip-rule="evenodd"
                              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                              fill-rule="evenodd"></path>
                      </svg>
                  </button>
              </label>
          </form>
      </div>

      </div>
      <div class="col-md-2">
        <button (click)="addsetupboxplan(this.id)" style="color:white;background-color: #141E46;border-radius: 10px;"
          mat-raised-button [hidden]="valueaddsetupbox!=='Customer-Setupbox Add'">Add Setupbox</button>

      </div>
      <div class="col">
        <button (click)="setuphistory(this.id)" style="color:white;background-color: #141E46;border-radius: 10px;"
          mat-raised-button [hidden]="valueaddsetupboxhistory!=='Customer-Setupbox History'">History</button>
      </div>

    </div>

    <div class="row mt-1 mx-1">
      <div class="col-12 mb-3 mb-lg-5">
        <div class="card table-nowrap table-card">
          <div class="table-responsive text-nowrap text-center">
            <table class="table table-hover" id="customers">
              <tr>

                <th>S No</th>
                <th>Setupbox Number</th>
                <th>Service Provider Name</th>
                <th>Region</th>
                <th [hidden]="valuesetupboxduestatus!=='Customer-Setupbox Due Status'">Due Status</th>
                <th [hidden]="valuesetupboxDueStatusHistory!=='Customer-Setupbox Due Status History'">Due Status History
                </th>
                <th [hidden]="valueaddsetupboxhistory!=='Customer-Setupbox History'">Setupbox History</th>
                <th [hidden]="valuesetupboxstatus!=='Customer-Setupbox Status'">Status</th>
                <th [hidden]="valuesetupboxview!=='Customer-Setupbox View'">View Plan</th>
                <th [hidden]="valuesetupboxReminder!=='Customer-Setupbox Reminder'">Reminder</th>
                <th [hidden]="valuesetupboxedit!=='Customer-Setupbox Edit'">Action</th>
                <th>Billing Date</th>
                <th>Activation Date</th>
                <th>Inactivation Date</th>
                <th>Description</th>
                <th>Created By</th>
                <th>Created At</th>
              </tr>
              <!-- <span *ngIf="!showData" class="text-center" style="color:red;font-size:12px;">NO DATA FOUND</span> -->

              <tbody>
                <tr
                  *ngFor="let row of setupboxview | search: searchText | paginate: { itemsPerPage: 3, currentPage: currentPage }; let i = index">

                  <td>{{ i + 1 }}</td>
                  <td>{{ row.stbId?.setupBoxNumber }}</td>
                  <td>{{ row.stbId?.service?.serviceProviderName }}</td>
                  <td>{{ row.stbId?.regionEntity?.stateName }}</td>
                  <td [hidden]="valuesetupboxduestatus!=='Customer-Setupbox Due Status'">

                      <span matTooltip="Click here to change the due status" (click)="dueStatus(row.customerStbId,row.dueStatus)"
                      *ngIf="row.dueStatus == 'ON'"
                      style="color: green;background-color: rgb(177, 243, 177);border-radius: 5px;padding: 5px;cursor: pointer;">ON</span>
                 
                    
                   

                      <span (click)="dueStatus(row.customerStbId,row.dueStatus)" matTooltip="Click here to change the due status"
                      *ngIf="row.dueStatus == 'OFF'"
                      style="color: red;background-color:antiquewhite;border-radius: 5px;padding: 5px;cursor: pointer;">OFF</span>
                  

                    <!-- <img (click)="dueStatus(row.customerStbId,row.dueStatus)" style="width: 50%;"
                      src="/assets/onstatus.png" *ngIf="row.dueStatus == 'ON'" /> -->
                    <!-- <img (click)="dueStatus(row.customerStbId,row.dueStatus)" style="width: 50%;"
                      src="/assets/offstatus.png" *ngIf="row.dueStatus == 'OFF'" />     -->

                    <!-- <mat-slide-toggle class="example-margin" color="primary" [checked]="data.activeStatus === 1"
                      (change)="Inactive($event,data.customerId)">
                    </mat-slide-toggle> -->
                  </td>
                  <td [hidden]="valuesetupboxDueStatusHistory!=='Customer-Setupbox Due Status History'"
                    style="cursor: pointer;" (click)="Viewhistory(row.customerStbId)">
                    <i class="fas fa-eye" style="font-size: 16px;color: rgb(39, 39, 95);"></i>
                  </td>
                  <td [hidden]="valueaddsetupboxhistory!=='Customer-Setupbox History'"
                  style="cursor: pointer;" (click)="setupboxviewhistory(row.customerId.customerId,row.customerStbId)">
                  <i class="fas fa-eye" style="font-size: 16px;color: rgb(39, 39, 95);"></i>
                </td>
                  <td [hidden]="valuesetupboxstatus!=='Customer-Setupbox Status'">
                    <mat-slide-toggle class="example-margin" color="primary" [checked]="row.activeStatus === 1"
                      (change)="ActiveStatus($event,row.customerStbId)">
                    </mat-slide-toggle>
                  </td>
                  <td [hidden]="valuesetupboxview!=='Customer-Setupbox View'" style="cursor: pointer;"
                    (click)="Viewdata(row.customerStbId)">
                    <i class="fas fa-eye" style="font-size: 16px;color: rgb(39, 39, 95);"></i>
                  </td>
                  <td [hidden]="valuesetupboxReminder!=='Customer-Setupbox Reminder'" style="cursor: pointer;"
                    (click)="remainderstatus(row.customerStbId)">
                    <i class="fa-solid fa-bell" style="font-size: 16px;color: rgb(39, 39, 95);"></i>
                  </td>
                  <td [hidden]="valuesetupboxedit!=='Customer-Setupbox Edit'" style="cursor: pointer;"
                    (click)="editsetupboxplan(row)">
                    <i class="fas fa-edit" style="font-size: 16px;color: rgb(39, 39, 95);"></i>
                  </td>
                  <td>{{ row?.billingDate | date:'dd/MM/yyyy'}}</td>
                  <td>{{ row?.activatedDate | date:'dd/MM/yyyy'}}</td>
                  <td>{{ row?.inActivatedDate | date:'dd/MM/yyyy'}}</td>
                  <td>{{ row?.description}}</td>
                  <td>{{ row.createdBy }}</td>
                  <td>{{row.createdAt | date:'dd/MM/yyyy hh:mm a'}}
                  </td>
                </tr>
              </tbody>
            </table>

          </div>

        </div>
      </div>
    </div>
    <div class="text-end">
      <pagination-controls (pageChange)="currentPage= $event"></pagination-controls>
    </div>
  </div>

</div>
<div id="Additional" *ngIf="selectedTab === 'Additional-Payments'" class="mb-4">
  <div>
    <div class="row mt-5 mx-1">
      <div class="col-md-3">
        <div class="search ">
          <form class="form">
              <label for="search">
                  <input (ngModelChange)="onSearchTextChange()" #input name="search" required autocomplete="off" placeholder="Search" id="search" type="text" [(ngModel)]="searchText">
 
                  <div class="icon">
                      <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                          xmlns="http://www.w3.org/2000/svg" class="swap-on">
                          <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round"
                              stroke-linecap="round"></path>
                      </svg>
                      <!-- <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                          xmlns="http://www.w3.org/2000/svg" class="swap-off">
                          <path d="M10 19l-7-7m0 0l7-7m-7 7h18" stroke-linejoin="round"
                              stroke-linecap="round">
                          </path>
                      </svg> -->
                  </div>
                  <button type="reset" class="close-btn">
                      <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                          <path clip-rule="evenodd"
                              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                              fill-rule="evenodd"></path>
                      </svg>
                  </button>
              </label>
          </form>
      </div>
      </div>
      <div class="col-md-2">
        <button [hidden]="valueAdditionalPaymentsadd!=='Customer-Additional Payments Add'" (click)="addAdditional()"
          style="color:white;background-color: #141E46;border-radius: 10px;" mat-raised-button>Create</button>
      </div>
      <div class="col">
        <!-- <button  (click)="setuphistory(this.id)" style="color:white;background-color: #141E46;border-radius: 10px;"
    mat-raised-button >History</button> -->
      </div>
    </div>
    <div class="row mt-1 mx-1">
      <div class="col-12 mb-3 mb-lg-5">
        <div class="card table-nowrap table-card">
          <div class="table-responsive text-nowrap text-center">
            <table class="table table-hover" id="customers">
              <tr>

                <th>S No</th>
                <th>Service Name</th>
                <th>Payment Id</th>
                <th>Bank Reference</th>
                <th>Payment Method</th>
                <th>Payment Status</th>
                <th>Service Amount</th>
                <th [hidden]="valueAdditionalPaymentsaction!=='Customer-Additional Payments Edit'">Action</th>
                <th [hidden]="valueAdditionalPaymentsInvoice!=='Customer-Additional Payments Invoice'">Invoice</th>
                <th>Paid At</th>

              </tr>
              <!-- <span *ngIf="!showData" class="text-center" style="color:red;font-size:12px;">NO DATA FOUND</span> -->

              <tbody>
                <tr
                  *ngFor="let item of additionlpay | search: searchText | paginate: { itemsPerPage: 3, currentPage: currentPage }; let i = index">

                  <td>{{ i + 1 }}</td>
                  <td>{{ item.addtionalCategory?.serviceName}}</td>
                  <td>{{ item.pgPaymentId ||'--'}}</td>
                  <td>{{item.bankReference ||'--'}}</td>
                  <td>{{ item.paymentMethod ||'--'}}</td>
                  <td>
                    <span *ngIf="item?.paymentStatus == 'Success'" class="text-success"> {{
                      item?.paymentStatus}}</span>
                    <span *ngIf="item?.paymentStatus   == 'Due Pending'" class="text-warning"> {{
                      item?.paymentStatus}}</span>
                    <span *ngIf="item?.paymentStatus  == 'Initiated'" class="text-primary"> {{
                      item?.paymentStatus}}</span>
                    <span *ngIf="item?.paymentStatus  == 'Failure'" class="text-danger"> {{
                      item?.paymentStatus}}</span>


                  </td>
                  <td>{{ item.paidAmount}}</td>
                  <td [hidden]="valueAdditionalPaymentsaction!=='Customer-Additional Payments Edit'"><i
                      style="text-align: center;cursor: pointer;font-size:15px; color:#545497;"
                      (click)="editpayment(item)" class="fas fa-edit"></i></td>
                  <td [hidden]="valueAdditionalPaymentsInvoice!=='Customer-Additional Payments Invoice'"> <button
                      class="btn btn-success btn-sm" [disabled]="item?.paymentStatus != 'Success'"
                      style="border:none;" (click)="viewreciept(item?.customerpaymentId)"> <i
                        class="fa-solid fa-download" style="color:#fff;"></i></button></td>
                  <td>{{item.paymentDateTime| date:'dd/MM/yyyy hh:mm'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="text-end">
      <pagination-controls (pageChange)="currentPage= $event"></pagination-controls>
    </div>
  </div>

</div>
<div id="refund" *ngIf="selectedTab === 'Refund'" class="mb-4">
  <div>
    <div class="row mt-4 mx-1">
      <div class="col ">
        <div class="search ">
          <form class="form">
              <label for="search">
                  <input (ngModelChange)="onSearchTextChange()" #input name="search" required autocomplete="off" placeholder="Search" id="search" type="text" [(ngModel)]="searchText">
 
                  <div class="icon">
                    <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg" class="swap-on">
                    <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round"
                        stroke-linecap="round"></path>
                </svg>
                <!-- <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg" class="swap-off">
                    <path d="M10 19l-7-7m0 0l7-7m-7 7h18" stroke-linejoin="round"
                        stroke-linecap="round">
                    </path>
                </svg> -->
                  </div>
                  <button type="reset" class="close-btn">
                      <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                          <path clip-rule="evenodd"
                              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                              fill-rule="evenodd"></path>
                      </svg>
                  </button>
              </label>
          </form>
      </div> &nbsp;
          <!-- <button (click)="refundsearch(input.value)"  style="color:white;background-color: #141E46;border-radius: 10px;"
              mat-raised-button>Go</button>
          -->
      </div>
  </div>
    <div class="row mt-1 mx-1">
      <div class="col-12 mb-3 mb-lg-5">
        <div class="card table-nowrap table-card">
          <div class="table-responsive text-nowrap text-center">
            <table class="table table-hover" id="customers">
              <tr>
 
                <th>S No</th>
                <th>SetupBox Number</th>
                <th>Type</th>
                <th>Refund Amount</th>
                <th>Payment ID</th>
                <th>Request ID</th>
                <th>Activity ID</th>
                <th>Paid Amount</th>
 
                <th>Refund Amount</th>
                <th>Refund Status</th>
                <!-- <th>Created date</th> -->
                <th>Refund Date</th>
 
              </tr>
              <!-- <span *ngIf="!showData" class="text-center" style="color:red;font-size:12px;">NO DATA FOUND</span> -->
 
              <tbody>
                <tr
                  *ngFor="let item of refundval  | search: searchText | paginate: { itemsPerPage: 3, currentPage: currentPage }; let i = index" >
 
                  <td>{{ i + 1 }}</td>
                  <td>{{item.paymentModel ?.customerStbId?. stbId?. setupBoxNumber
                  }}</td>
                  <td>{{ item.type}}</td>
                  <td>{{ item.refundAmount ||'--'}}</td>
                  <td>{{ item.paymentId ||'--'}}</td>
                 
                  <td>{{ item.requestId}}</td>
                  <td>{{ item.activityId}}</td>
                  <td>{{ item.paymentModel?.paidAmount}}</td>
                  <td>{{ item.refundAmount}}</td>
                  <td>{{ item.refundStatus}}</td>
                  <!-- <td>{{item.createdAt| date:'dd/MM/yyyy hh:mm'}}</td> -->
                  <td>{{item.refundDateTime| date:'dd/MM/yyyy hh:mm'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="text-end">
      <pagination-controls (pageChange)="currentPage= $event"></pagination-controls>
 
  </div>
  </div>
 
</div>
