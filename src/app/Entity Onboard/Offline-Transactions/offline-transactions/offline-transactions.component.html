<div class="row mt-1">
  <div class="col-md-8">
    <h5 Static style="text-align: left; color: #141e46">Static QR Payments</h5>
  </div>
  <div class="col-md-4 text-end">
    <button
      style="
        color: white;
        background-color: #141e46;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        padding: 5px 5px;
      "
      (click)="close()"
    >
      Back
    </button>
  </div>
</div>
<div class="row mt-1">
  <div class="col-md-3" style="margin-top: 25px">
    <div class="search">
      <form class="form">
        <label for="search">
          <input
            #input
            (keyup)="applyFilter($event)"
            required=""
            autocomplete="off"
            placeholder="Search"
            id="search"
            type="text"
          />
          <div class="icon">
            <svg
              stroke-width="2"
              stroke="currentColor"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="swap-on"
            >
              <path
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                stroke-linejoin="round"
                stroke-linecap="round"
              ></path>
            </svg>
          </div>
          <button type="reset" (click)="reload()" class="close-btn">
            <svg
              viewBox="0 0 20 20"
              class="h-5 w-5"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                clip-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                fill-rule="evenodd"
              ></path>
            </svg>
          </button>
        </label>
      </form>
    </div>
  </div>

  <div class="col-md-2" style="margin-top: 25px">
    <button
      [hidden]="valuestaticsettlement !== 'Entity View Offline-Settlement'"
      style="
        color: white;
        background-color: #141e46;
        border-radius: 10px;
        font-size: 12px;
      "
      (click)="settlement(this.accountId)"
      mat-raised-button
    >
      Settlement
    </button>
  </div>

  <div class="col-md-2">
    <label><b>From Date</b></label>
    <input
      onkeydown="return false;"
      class="form-control"
      type="date"
      name="FromDate"
      [(ngModel)]="FromDateRange"
      (change)="checkDate()"
      [max]="maxDate"
      style="height: 35px; width: 150px; border-radius: 5px"
    />
  </div>
  <div class="col-md-2">
    <label><b>To Date</b></label>
    <input
      onkeydown="return false;"
      class="form-control"
      type="date"
      name="ToDate"
      [(ngModel)]="ToDateRange"
      [min]="FromDateRange"
      [max]="maxDate"
      style="height: 35px; width: 150px; border-radius: 5px"
    />
  </div>

  <div class="col-md-1 mt-4">
    <button
      style="
        color: white;
        background-color: #141e46;
        border-radius: 10px;
        font-size: 12px;
      "
      [disabled]="!FromDateRange || !ToDateRange"
      mat-raised-button
      (click)="filterdate()"
    >
      Filter
    </button>
  </div>

  <div class="col-md-1 mt-4">
    <button
      style="
        color: white;
        background-color: #141e46;
        border-radius: 10px;
        font-size: 12px;
      "
      mat-raised-button
      (click)="reset()"
    >
      Reset
    </button>
  </div>
</div>
<!-- <mat-card> -->
<mat-card-content>
  <div
    class="example-container text-nowrap mt-3"
    style="overflow-x: scroll; scrollbar-width: thin"
  >
    <table
      id="season-tble"
      matSort
      mat-table
      [dataSource]="dataSource"
      class="mat-elevation-z8"
    >
      <ng-container matColumnDef="sno">
        <th mat-header-cell *matHeaderCellDef>S.No</th>
        <td mat-cell *matCellDef="let viewall; let i = index">{{ i + 1 }}</td>
      </ng-container>
      <ng-container matColumnDef="accountId">
        <th mat-header-cell *matHeaderCellDef>Account ID</th>
        <td mat-cell *matCellDef="let transaction">
          {{ transaction.accountId }}
        </td>
      </ng-container>

      <ng-container matColumnDef="paymentId">
        <th mat-header-cell *matHeaderCellDef>Payment ID</th>
        <td mat-cell *matCellDef="let transaction">{{ transaction.id }}</td>
      </ng-container>
      <ng-container matColumnDef="entityname">
        <th mat-header-cell *matHeaderCellDef>Terminal ID</th>
        <td mat-cell *matCellDef="let transaction">
          {{ transaction?.terminalId }}
        </td>
      </ng-container>
      <ng-container matColumnDef="customername">
        <th mat-header-cell *matHeaderCellDef>Customer Name</th>
        <td mat-cell *matCellDef="let transaction">
          {{ transaction?.customer }}
        </td>
      </ng-container>

      <ng-container matColumnDef="vpa">
        <th mat-header-cell *matHeaderCellDef>VPA</th>
        <td mat-cell *matCellDef="let transaction">{{ transaction?.vpa }}</td>
      </ng-container>
      <ng-container matColumnDef="ordrnum">
        <th mat-header-cell *matHeaderCellDef>Merchant Order Number</th>
        <td mat-cell *matCellDef="let transaction">
          {{ transaction?.merchantOrderNo }}
        </td>
      </ng-container>

      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef>Amount</th>
        <td mat-cell *matCellDef="let transaction">
          {{ transaction?.amount }}
        </td>
      </ng-container>
      <ng-container matColumnDef="paystatus">
        <th mat-header-cell *matHeaderCellDef>Payment Status</th>
        <td mat-cell *matCellDef="let transaction">
          <span
            *ngIf="transaction?.completed == 'SUCCESS'"
            class="text-success"
            >{{ transaction?.completed }}</span
          >
          <span
            *ngIf="transaction?.completed == 'FAILURE'"
            class="text-danger"
            >{{ transaction?.completed }}</span
          >
        </td>
      </ng-container>
      <ng-container matColumnDef="viewsuccess">
        <th
          mat-header-cell
          *matHeaderCellDef
          [hidden]="valuestaticview !== 'Entity View Offline-View'"
        >
          View
        </th>
        <td
          mat-cell
          *matCellDef="let transaction"
          [hidden]="valuestaticview !== 'Entity View Offline-View'"
        >
          <button
            [hidden]="transaction?.completed == 'FAILURE'"
            (click)="viewsuccess(transaction.accountId, transaction.id)"
            style="border: none; background: none"
          >
            <i
              class="fas fa-eye"
              style="cursor: pointer; font-size: 17px"
              [ngClass]="{
                'disabled-icon': transaction?.completed == 'FAILURE',
                'enabled-icon': transaction?.completed == 'SUCCESS'
              }"
            ></i>
          </button>
          <button
            [hidden]="transaction?.completed == 'SUCCESS'"
            (click)="viewFailure(transaction.accountId, transaction.id)"
            style="border: none; background: none"
          >
            <i
              class="fas fa-eye"
              style="font-size: 16px; cursor: pointer"
              [ngClass]="{
                            'disabled-icon': (transaction?.completed =='SUCCESS'),
                            'enabled-icon': (transaction?.completed =='FAILURE'),
                          }"
            ></i>
          </button>
        </td>
      </ng-container>

      <ng-container matColumnDef="paidAt">
        <th mat-header-cell *matHeaderCellDef>Paid At</th>
        <td mat-cell *matCellDef="let transaction">
          {{ transaction.createdAt | date : "dd/MM/yyyy hh:mm a" }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      <tr *matNoDataRow>
        <td class="mat-cell" colspan="0" *ngIf="searchPerformed">
          No Data For {{ input.value }}
        </td>
        <td
          class="mat-cell"
          colspan="0"
          *ngIf="!searchPerformed && dataSource.data.length === 0"
        >
          No data
        </td>
      </tr>
    </table>
  </div>
</mat-card-content>
<mat-card-footer>
  <mat-paginator
    (page)="getData($event)"
    [pageIndex]="pageIndex"
    [pageSize]="pageSize"
    [length]="length"
    [pageSizeOptions]="[5, 10, 50, 100, 200]"
    aria-label="Select page of users"
  ></mat-paginator>
</mat-card-footer>
