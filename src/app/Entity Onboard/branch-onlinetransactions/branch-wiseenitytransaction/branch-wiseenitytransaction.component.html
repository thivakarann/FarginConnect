<div *ngIf="selectedTransactionType == 'Due Transaction'">
  <div class="form-header d-flex justify-content-between align-items-center">
    <h5 style="text-align: left; color: #141e46">Due Branch Transaction</h5>
    <button style="
        color: white;
        background-color: #141e46;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        padding: 5px 5px;
      " (click)="close()">
      Back
    </button>
  </div>
  <mat-card-header>
    <div class="row">
      <!-- <label for="state" style="margin-left: 6px">Select Transaction </label> -->

      <div class="col-3">
        <select (change)="transactionsDropdown($event)" class="form-select">
          <option [selected]="selectedTransactionType == 'Due Transaction'" value="Due Transaction">
            Due Transaction
          </option>
          <option value="Additional Transaction">Additional Transaction</option>
        </select>
      </div>

      <div class="col">
        <div class="search">
          <form class="form">
            <label for="search">
              <input #input required="" autocomplete="off" placeholder="Search" id="search" type="text" name="search"
                [(ngModel)]="currentfilval" />
              <div class="icon">
                <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                  xmlns="http://www.w3.org/2000/svg" class="swap-on">
                  <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round" stroke-linecap="round">
                  </path>
                </svg>
              </div>
              <button (click)="Getall()" type="reset" class="close-btn">
                <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                  <path clip-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    fill-rule="evenodd"></path>
                </svg>
              </button>
            </label>
          </form>
        </div>
        &nbsp;&nbsp;&nbsp;
        <button (click)="channelsearch(currentfilval)" style="
            color: white;
            background-color: #141e46;
            border-radius: 10px;
            font-size: 12px;
          " mat-raised-button>
          Go
        </button>

        <!-- <button
        (click)="exportexcel()"
        style="
          color: white;
          background-color: #141e46;
          border-radius: 10px;
          font-size: 12px;
        "
        mat-raised-button
        [hidden]="valueexport !== 'Entity View Branch-online View-Export'"
      >
        Export
      </button> -->
      </div>
    </div>
  </mat-card-header>
  <mat-card-content>
    <div class="example-container text-nowrap mt-2" style="overflow-x: scroll; scrollbar-width: thin">
      <table id="season-tble" matSort mat-table [dataSource]="dataSource" class="mat-elevation-z1">
        <ng-container matColumnDef="alcotId">
          <th mat-header-cell *matHeaderCellDef>S.No</th>
          <td mat-cell *matCellDef="let data; let i = index">{{ i + 1 }}</td>
        </ng-container>

        <ng-container matColumnDef="customerName">
          <th mat-header-cell *matHeaderCellDef>Customer Name</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.customerName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="pgPaymentId">
          <th mat-header-cell *matHeaderCellDef>Payment ID</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.pgPaymentId || "-" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="mobileNumber">
          <th mat-header-cell *matHeaderCellDef>Mobile Number</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.mobileNumber }}
          </td>
        </ng-container>

        <ng-container matColumnDef="branchname">
          <th mat-header-cell *matHeaderCellDef>Branch Name</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.branchName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="setupBoxNumber">
          <th mat-header-cell *matHeaderCellDef>Set-Topbox Number</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.setupBoxNumber }}
          </td>
        </ng-container>

        <ng-container matColumnDef="paidAmount">
          <th mat-header-cell *matHeaderCellDef>Paid Amount</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.paidAmount }}
          </td>
        </ng-container>

        <ng-container matColumnDef="paymentMethod">
          <th mat-header-cell *matHeaderCellDef>Payment Method</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.paymentMethod }}
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Payment Status</th>
          <td mat-cell *matCellDef="let data">
            <span *ngIf="data?.paymentStatus == 'Success'" class="text-success">
              {{ data?.paymentStatus }}</span>
            <span *ngIf="data?.paymentStatus == 'Due Pending'" class="text-warning">
              {{ data?.paymentStatus }}</span>
            <span *ngIf="data?.paymentStatus == 'Initiated'" class="text-primary">
              {{ data?.paymentStatus }}</span>
            <span *ngIf="data?.paymentStatus == 'Payment Incomplete'" class="text-danger">
              {{ data?.paymentStatus }}</span>
            <span *ngIf="data?.paymentStatus == 'Failure'" class="text-danger">
              {{ data?.paymentStatus }}</span>
            <span *ngIf="data?.paymentStatus == 'Due Cancelled'" class="text-danger">
              {{ data?.paymentStatus }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="paidAt">
          <th mat-header-cell *matHeaderCellDef>Paid At</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.paymentDateTime | date : "dd/MM/yyyy hh:mm a" }}
          </td>
        </ng-container>
        <ng-container matColumnDef="createdDateTime">
          <th mat-header-cell *matHeaderCellDef>Due Generated At</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.createdDateTime | date : "dd/MM/yyyy hh:mm a" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="view">
          <th [hidden]="valueView !== 'Entity View-Branch-Transactions-View'" mat-header-cell *matHeaderCellDef>
            View
          </th>
          <td [hidden]="valueView !== 'Entity View-Branch-Transactions-View'" mat-cell *matCellDef="let data">
            <i class="fas fa-eye" (click)="View(data?.customerPayId)"></i>
          </td>
        </ng-container>

        <ng-container matColumnDef="Receipt">
          <th [hidden]="
              valueReceipt !== 'Entity View-Branch-Transactions-Receipt'
            " mat-header-cell *matHeaderCellDef>
            Receipt
          </th>
          <td [hidden]="
              valueReceipt !== 'Entity View-Branch-Transactions-Receipt'
            " mat-cell *matCellDef="let data">
            <!-- <button class="btn btn-success btn-sm"  [disabled]="viewall?.paymentStatus!='Success'" >   <i  class="fas fa-receipt" (click)="Receipt(viewall.customerPayId)"></i></button> -->
            <button class="btn btn-success btn-sm" [disabled]="data.paymentStatus != 'Success'"
              style="border: none; font-size: 12px" (click)="Receipt(data.customerPayId)">
              <i style="font-size: 12px" class="fas fa-receipt" style="color: #fff"></i>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        <tr *matNoDataRow>
          <td class="mat-cell" colspan="0" *ngIf="searchPerformed">
            No Data For{{ input.value }}
          </td>
          <td class="mat-cell" colspan="0" *ngIf="!searchPerformed && dataSource.data.length === 0">
            No Data
          </td>
        </tr>
      </table>
    </div>
  </mat-card-content>

  <mat-card-footer>
    <mat-paginator (page)="getData($event)" [length]="totalPages" [pageIndex]="currentpage" [pageSize]="totalpage"
      [pageSizeOptions]="[5, 50, 100, 500, 1000]" aria-label="Select page">
    </mat-paginator>
  </mat-card-footer>
</div>

<div *ngIf="selectedTransactionType == 'Additional Transaction'">
  <div class="form-header d-flex justify-content-between align-items-center">
    <h5 style="text-align: left; color: #141e46">
      Additional Branch Transaction
    </h5>
    <button style="
        color: white;
        background-color: #141e46;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        padding: 5px 5px;
      " (click)="close()">
      Back
    </button>
  </div>
  <mat-card-header>
    <div class="row">
      <!-- <label for="state" style="margin-left: 6px">Select Transaction </label> -->

      <div class="col-3">
        <select (change)="transactionsDropdown($event)" class="form-select">
          <option value="Due Transaction">Due Transaction</option>
          <option [selected]="selectedTransactionType == 'Additional Transaction'" value="Additional Transaction">
            Additional Transaction
          </option>
        </select>
      </div>

      <div class="col">
        <div class="search">
          <form class="form">
            <label for="search">
              <input #input required="" autocomplete="off" placeholder="Search" id="search" type="text" name="search"
                [(ngModel)]="currentfilvals" />
              <div class="icon">
                <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                  xmlns="http://www.w3.org/2000/svg" class="swap-on">
                  <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round" stroke-linecap="round">
                  </path>
                </svg>
              </div>
              <button (click)="getAdditionalAll()" type="reset" class="close-btn">
                <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                  <path clip-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    fill-rule="evenodd"></path>
                </svg>
              </button>
            </label>
          </form>
        </div>
        &nbsp;&nbsp;&nbsp;
        <button (click)="additionalcsearch(currentfilvals)" style="
            color: white;
            background-color: #141e46;
            border-radius: 10px;
            font-size: 12px;
          " mat-raised-button>
          Go
        </button>

        <!-- <button
        (click)="exportexcel()"
        style="
          color: white;
          background-color: #141e46;
          border-radius: 10px;
          font-size: 12px;
        "
        mat-raised-button
        [hidden]="valueexport !== 'Entity View Branch-online View-Export'"
      >
        Export
      </button> -->
      </div>
    </div>
  </mat-card-header>
  <mat-card-content>
    <div class="example-container text-nowrap mt-2" style="overflow-x: scroll; scrollbar-width: thin">
      <table id="season-tble" matSort mat-table [dataSource]="dataSources" class="mat-elevation-z1">
        <ng-container matColumnDef="alcotId">
          <th mat-header-cell *matHeaderCellDef>S.No</th>
          <td mat-cell *matCellDef="let data; let i = index">{{ i + 1 }}</td>
        </ng-container>

        <ng-container matColumnDef="customerName">
          <th mat-header-cell *matHeaderCellDef>Customer Name</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.customerName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="pgPaymentId">
          <th mat-header-cell *matHeaderCellDef>Payment ID</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.pgPaymentId || "-" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="mobileNumber">
          <th mat-header-cell *matHeaderCellDef>Mobile Number</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.mobileNumber }}
          </td>
        </ng-container>

        <ng-container matColumnDef="branchname">
          <th mat-header-cell *matHeaderCellDef>Branch Name</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.branchName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="Serivice">
          <th mat-header-cell *matHeaderCellDef>Service Name</th>
          <td mat-cell *matCellDef="let data">
            <span *ngIf="data.flag==1">-</span>
            <span *ngIf="data.flag==2"> {{ data?.inventoryName}}</span>

          </td>
        </ng-container>

        <ng-container matColumnDef="setupBoxNumber">
          <th mat-header-cell *matHeaderCellDef>Stock Category</th>
          <td mat-cell *matCellDef="let data">
            <span *ngIf="data.flag==2">-</span>
            <span *ngIf="data.flag==1"> {{ data?.inventoryName}}</span>
          </td>
        </ng-container>
        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef>Stock Quantity</th>
          <td mat-cell *matCellDef="let data">

            <span *ngIf="data?.quantity==0">
              -
            </span>
            <span *ngIf="data?.quantity!=0">
              {{ data?.quantity }}
            </span>

          </td>
        </ng-container>

        <ng-container matColumnDef="paidAmount">
          <th mat-header-cell *matHeaderCellDef>Paid Amount</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.paidAmount }}
          </td>
        </ng-container>

        <ng-container matColumnDef="paymentMethod">
          <th mat-header-cell *matHeaderCellDef>Payment Method</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.paymentMethod }}
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Payment Status</th>
          <td mat-cell *matCellDef="let data">
            <span *ngIf="data?.paymentStatus == 'Success'" class="text-success">
              {{ data?.paymentStatus }}</span>
            <span *ngIf="data?.paymentStatus == 'Due Pending'" class="text-warning">
              {{ data?.paymentStatus }}</span>
            <span *ngIf="data?.paymentStatus == 'Initiated'" class="text-primary">
              {{ data?.paymentStatus }}</span>
            <span *ngIf="data?.paymentStatus == 'Payment Incomplete'" class="text-danger">
              {{ data?.paymentStatus }}</span>
            <span *ngIf="data?.paymentStatus == 'Failure'" class="text-danger">
              {{ data?.paymentStatus }}</span>
            <span *ngIf="data?.paymentStatus == 'Due Cancelled'" class="text-danger">
              {{ data?.paymentStatus }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="paidAt">
          <th mat-header-cell *matHeaderCellDef>Paid At</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.paymentDateTime | date : "dd/MM/yyyy hh:mm a" }}
          </td>
        </ng-container>
        <ng-container matColumnDef="createdDateTime">
          <th mat-header-cell *matHeaderCellDef>Due Generated At</th>
          <td mat-cell *matCellDef="let data">
            {{ data?.createdDateTime | date : "dd/MM/yyyy hh:mm a" }}
          </td>
        </ng-container>

        <ng-container matColumnDef="view">
          <th [hidden]="valueView !== 'Entity View-Branch-Transactions-View'" mat-header-cell *matHeaderCellDef>
            View
          </th>
          <td [hidden]="valueView !== 'Entity View-Branch-Transactions-View'" mat-cell *matCellDef="let data">
            <i class="fas fa-eye" (click)="additionalView(data?.customerpaymentId)"></i>
          </td>
        </ng-container>

        <ng-container matColumnDef="Receipt">
          <th [hidden]="
              valueReceipt !== 'Entity View-Branch-Transactions-Receipt'
            " mat-header-cell *matHeaderCellDef>
            Receipt
          </th>
          <td [hidden]="
              valueReceipt !== 'Entity View-Branch-Transactions-Receipt'
            " mat-cell *matCellDef="let data">
            <!-- <button class="btn btn-success btn-sm"  [disabled]="viewall?.paymentStatus!='Success'" >   <i  class="fas fa-receipt" (click)="Receipt(viewall.customerPayId)"></i></button> -->
            <button class="btn btn-success btn-sm" [disabled]="data.paymentStatus != 'Success'"
              style="border: none; font-size: 12px" (click)="additionalReceipt(data.customerpaymentId)">
              <i style="font-size: 12px" class="fas fa-receipt" style="color: #fff"></i>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedadditionalColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedadditionalColumns"></tr>
        <tr *matNoDataRow>
          <td class="mat-cell" colspan="0" *ngIf="searchPerformed">
            No Data For{{ input.value }}
          </td>
          <td class="mat-cell" colspan="0" *ngIf="!searchPerformed && dataSources.data.length === 0">
            No Data
          </td>
        </tr>
      </table>
    </div>
  </mat-card-content>

  <mat-card-footer>
    <mat-paginator (page)="getAdditionalData($event)" [length]="totalPages" [pageIndex]="currentpage"
      [pageSize]="totalpage" [pageSizeOptions]="[5, 50, 100, 500, 1000]" aria-label="Select page">
    </mat-paginator>
  </mat-card-footer>
</div>