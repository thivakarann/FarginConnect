<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- TITLE STARTS -->

<div class="row" style="margin-left: -7px;">

  <div style="font-size: x-large; font-weight: 600;margin-top: -25px;" class="w-50">
    {{ detaislone?.entityName }}
  </div>

  <div class="container py-1">
    <div class="row">
      <div class="col-12 d-flex flex-wrap justify-content-between align-items-center"
        style="color: #2346cf; font-weight: 600; font-size: 14px;margin-bottom:6px;">
        <span class="me-2">
          <strong>Note:</strong> The functionalities of the tabs listed below can only be accessed once the Onboarding
          process is completed, except Payment Link.
        </span>
        <button class="button1 btn-sm mt-2 mt-md-0" (click)="close()">Back</button>
      </div>
    </div>
  </div>

</div>

<!-- TITLE ENDS -->


<!-- TAB ONE STARTS -->

<div class="nav-wrapper">

  <button class="nav-arrow" (click)="scrollTabs('prev')"><i style="color:#141e46"
      class="fa-solid fa-backward"></i></button>

  <div class="navtabs tab-strip" #tabStrip>
    <button *ngIf="valueentitytransaction === 'Entity View Due Transactions'" class="tab-button"
      [disabled]="detaislone?.onBoardStatus != 'true'" (click)="entityTransaction(this.id)">
      <i class="fa-solid fa-building-columns"></i><br>Due Transactions
    </button>

    <button *ngIf="valuentityOffline === 'Entity View Offline'" class="tab-button"
      [disabled]="detaislone?.onBoardStatus != 'true'" (click)="Viewoffline(this.id, detaislone?.accountId)">
      <i class="fa-solid fa-building-columns"></i><br>Offline
    </button>

    <button *ngIf="branchtrans === 'Entity View-Branch-Transactions'" class="tab-button"
      [disabled]="detaislone?.onBoardStatus != 'true'" (click)="viewbranch(this.id)">
      <i class="fa-solid fa-building-columns"></i><br>Branch Transactions
    </button>

    <button *ngIf="valuentitysettlement === 'Entity View Settlement'" class="tab-button"
      [disabled]="detaislone?.onBoardStatus != 'true'" (click)="viewsettlement(this.id)">
      <i class="fas fa-handshake"></i><br>Settlement
    </button>

    <button *ngIf="valueentityRefund === 'Entity View Refund'" class="tab-button"
      [disabled]="detaislone?.onBoardStatus != 'true'" (click)="ViewRefund(this.id)">
      <i class="fas fa-hand-holding-usd"></i><br>Refund
    </button>

    <button *ngIf="valueentityautodebit === 'Entity View Cloud Fee AutoDebit'" class="tab-button"
      [disabled]="detaislone?.onBoardStatus != 'true'" (click)="Viewautodebit(this.id)">
      <i class="fa-solid fa-money-bill-transfer"></i><br>Cloud Fee Auto Debit
    </button>

    <button *ngIf="RenewelFee === 'Entity View Renewal Fee AutoDebit'" class="tab-button"
      [disabled]="detaislone?.onBoardStatus != 'true'" (click)="Viewrenewalautodebit(this.id)">
      <i class="fa-solid fa-money-bill-transfer"></i><br>Renewal Fee Auto Debit
    </button>

    <button *ngIf="valueEntityqrs === 'Entity View QR'" class="tab-button"
      [disabled]="detaislone?.onBoardStatus != 'true'" (click)="Viewqr(this.id)">
      <i class="fa-solid fa-qrcode"></i><br>QR Generation
    </button>

    <button *ngIf="valueentityCustomers === 'Entity View Customer'" class="tab-button"
      [disabled]="detaislone?.onBoardStatus != 'true'" (click)="Viewcustomer(this.id)">
      <i class="fa-solid fa-user"></i><br>Customers
    </button>

    <button *ngIf="valueentitypaylink === 'Entity View Payment Link'" class="tab-button"
      (click)="viewpaymentLink(this.id)">
      <i class="fa fa-link"></i><br>Payment Link
    </button>
  </div>

  <button class="nav-arrow" (click)="scrollTabs('next')"><i style="color:#141e46"
      class="fa-solid fa-forward"></i></button>
</div>

<!-- TAB ONE ENDS -->


<!-- TAB TWO STARTS -->


<div class="tab-container"
  [hidden]="valueGeneral !== 'Entity View General Information' && valuebankinfo !== 'Entity View Bank Information' && valuekycdocument !== 'Entity View KYC Document' && valuebussinessdocument !== 'Entity View Bussiness Document'&& valuefinalapproval !== 'Entity View Final Approval'&& valuemanualpayment !== 'Entity View One Time Setup Payment'&& valueCustomized !== 'Entity View Customized Payment'&&valuesmssetting !== 'Entity View-SMS Settings'&&valueagreement !== 'Entity View Agreement'&& valuebranch !== 'Entity View Branch'">

  <div class="info-tab-wrapper">
    <button class="info-tab-arrow" (click)="scrollInfoTabs('prev')"><i style="color:#141e46"
        class="fa-solid fa-backward"></i></button>

    <div class="info-tab-strip" #infoTabStrip>
      <button class="info-tab-button" [class.active-info]="activeTab === 'events'" (click)="selectTab('events')"
        [hidden]="valueGeneral !== 'Entity View General Information'">General Information</button>

      <button class="info-tab-button" [class.active-info]="activeTab === 'materials'" (click)="selectTab('materials')"
        [hidden]="valuebankinfo !== 'Entity View Bank Information'">Bank Information</button>

      <button class="info-tab-button" [class.active-info]="activeTab === 'videos'" (click)="selectTab('videos')"
        [hidden]="valuekycdocument !== 'Entity View KYC Document'">KYC Documents</button>

      <button class="info-tab-button" [class.active-info]="activeTab === 'bussiness'" (click)="selectTab('bussiness')"
        [hidden]="valuebussinessdocument !== 'Entity View Bussiness Document'">Business Documents</button>

      <button class="info-tab-button" [class.active-info]="activeTab === 'doot1'" (click)="selectTab('doot1')"
        [hidden]="valuefinalapproval !== 'Entity View Final Approval'">Final Approval</button>

      <button class="info-tab-button" [class.active-info]="activeTab === 'doot2'" (click)="selectTab('doot2')"
        [hidden]="valuemanualpayment !== 'Entity View One Time Setup Payment'">One-Time Setup</button>

      <button class="info-tab-button" [class.active-info]="activeTab === 'doot3'" (click)="selectTab('doot3')"
        [hidden]="valueCustomized !== 'Entity View Customized Payment'">Customized Pay</button>

      <button class="info-tab-button" [class.active-info]="activeTab === 'doot4'" (click)="selectTab('doot4')"
        [hidden]="valuesmssetting !== 'Entity View-SMS Settings'">SMS Settings</button>

      <button class="info-tab-button" [class.active-info]="activeTab === 'doot5'" (click)="selectTab('doot5')"
        [hidden]="valueagreement !== 'Entity View Agreement'">Agreement</button>

      <button class="info-tab-button" [class.active-info]="activeTab === 'doot6'" (click)="selectTab('doot6')"
        [hidden]="valuebranch !== 'Entity View Branch'">Branch</button>
    </div>

    <button class="info-tab-arrow" (click)="scrollInfoTabs('next')"><i style="color:#141e46"
        class="fa-solid fa-forward"></i></button>
  </div>

  <!-- GENERAL INFO STARTS -->

  <div class="tab-content" *ngIf="activeTab === 'events'" [hidden]="valueGeneral !== 'Entity View General Information'">

    <div class="filters">
      <div class="col-12">

        <div class="row" style="background-color: #bcdf72; color: #141e46">
          <div class="col-md-10">
            <h5 class="p-2 mx-3" style="font-weight: 500; font-size: 20px">
              General Information
            </h5>
          </div>
          <div class="col-md-2 d-flex justify-content-end">

            <!-- <span class="buttonDownload1">
                            <i class="fas fa-edit" style="color: #fff;font-size:18px;"
                                (click)="editpersonalInfo(this.id)"></i>
                        </span> -->

            <!-- [disabled]="detaislone?.onBoardStatus=='false'" //View onboardinfo -->
            &nbsp;&nbsp;&nbsp;

            <div class="buttonDownload1" [matMenuTriggerFor]="menu" [hidden]="
                valueeditentity !== 'Entity View-Edit' &&
                valueplandetails !== 'Entity Plan Details' &&
                valueviewonboard !== 'Entity View-Onboard Information' &&
                valueterminal !== 'Entity Terminal View' &&
                valueentityonboard !== 'Entity View-Onboard' &&
                valuefee !== 'Generate Cloud Fee' &&
                valuedues !== 'Generate Customer Dues' && 
                valuesms !== 'Monthly SMS Details'
              ">
              <i style="overflow: hidden; color: #fff; font-size: 22px" class="fa-solid fa-ellipsis-vertical">
                <mat-menu #menu="matMenu">
                  <button style="font-size: 10px" mat-menu-item (click)="editpersonalInfo(this.id)"
                    [hidden]="valueeditentity !== 'Entity View-Edit'">
                    Edit Entity Details
                  </button>
                  <button [hidden]="valueplandetails !== 'Entity Plan Details'" style="font-size: 10px" mat-menu-item
                    (click)="Entityplan()">
                    Entity Plan Details
                  </button>
                  <button [disabled]="
                      this.detaislone?.approvalStatusL1 !== 'approved' ||
                      this.detaislone?.approvalStatusL2 !== 'approved'
                    " style="font-size: 10px" mat-menu-item (click)="viewOnboardInfo(this.id)" [hidden]="
                      valueviewonboard !== 'Entity View-Onboard Information'
                    ">
                    View Onboard Info
                  </button>

                  <button [disabled]="this.detaislone?.onBoardStatus !== 'true'" style="font-size: 10px" mat-menu-item
                    (click)="EntityTerminal(this.id)" [hidden]="valueterminal !== 'Entity Terminal View'">
                    Entity Terminal View
                  </button>

                  <button style="font-size: 10px" mat-menu-item (click)="pgOnboard()" [disabled]="
                      this.detaislone?.approvalStatusL2 == 'Pending' ||
                      this.detaislone?.approvalStatusL2 == 'Rejected' || 
                      this.detaislone?.onBoardStatus == 'true'
                    " [hidden]="valueentityonboard !== 'Entity View-Onboard'">
                    Onboard Entity
                  </button>

                  <!--  -->
                  <button [disabled]="this.detaislone?.onBoardStatus !== 'true'"
                    [hidden]="valuefee !== 'Generate Cloud Fee'" style="font-size: 10px" mat-menu-item
                    (click)="Manuvelduesforcloudfee()">
                    Generate Cloud Fee
                  </button>
                  <button [disabled]="this.detaislone?.onBoardStatus !== 'true'"
                    [hidden]="valuedues !== 'Generate Customer Dues'" style="font-size: 10px" mat-menu-item
                    (click)="Manuvalduesforcustomer()">
                    Generate Customer Dues
                  </button>

                  <button [disabled]="this.detaislone?.onBoardStatus !== 'true'" style="font-size: 10px" mat-menu-item
                    (click)="monthlysmsdetails()" [hidden]="valuesms !== 'Monthly SMS Details'">
                    Monthly SMS Details
                  </button>
                  <!-- <button
                    [disabled]="this.detaislone?.onBoardStatus !== 'true'"
                    style="font-size: 10px"
                    mat-menu-item
                    (click)="CustomerQRcreation()"
                  >
                    Generate Customer QR
                  </button> -->

                  <!-- <button style="font-size: 10px;" mat-menu-item (click)="emailtrigger()"
                                        [disabled]="detaislone?.onBoardStatus=='false'">
                                        Email Notification</button> -->
                </mat-menu>
              </i>
            </div>
          </div>
        </div>

        <article class="car-details label-info mt-3">
          <div class="container-fluid">
            <div class="row">
              <!-- Left Column -->
              <div class="col-md-6 col-12">
                <!-- Account Information -->
                <div class="detail-section mb-4">
                  <h5 class="section-header">Account Information</h5>
                  <div class="detail-row">
                    <div class="detail-label">Account ID</div>
                    <div class="detail-value text-success">
                      <span *ngIf="detaislone?.accountId != null">{{ detaislone?.accountId }}</span>
                      <span *ngIf="detaislone?.accountId == null">-</span>
                    </div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Account Display Name</div>
                    <div class="detail-value">{{ detaislone?.accountDisplayName }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Reference Number</div>
                    <div class="detail-value">{{ detaislone?.referenceNo }}</div>
                  </div>
                </div>

                <!-- Entity Information -->
                <div class="detail-section mb-4">
                  <h5 class="section-header">Entity Information</h5>
                  <div class="detail-row">
                    <div class="detail-label">Entity Name</div>
                    <div class="detail-value">{{ detaislone?.entityName }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Entity Legal Name</div>
                    <div class="detail-value">{{ detaislone?.merchantLegalName }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Business Category</div>
                    <div class="detail-value">{{ detaislone?.businessCategoryModel?.categoryName }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">MCC Code</div>
                    <div class="detail-value">{{ detaislone?.mccCode }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Entity Plan</div>
                    <div class="detail-value">{{ detaislone?.merchantPlanModel?.planName }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">GSTIN</div>
                    <div class="detail-value">
                      <span *ngIf="detaislone?.gstIn != null">{{ detaislone?.gstIn }}</span>
                      <span *ngIf="detaislone?.gstIn == null">-</span>
                    </div>
                  </div>
                  <div class="detail-row" *ngIf="valuelogo === 'Entity View-LOGO'">
                    <div class="detail-label">Logo</div>
                    <div class="detail-value">
                      <span (click)="viewlogo(id, detaislone?.logoLink)">
                        <i class="fas fa-image icon-btn"></i>
                      </span>
                    </div>
                  </div>
                </div>

                <!-- Contact Information -->
                <div class="detail-section mb-4">
                  <h5 class="section-header">Contact Information</h5>
                  <div class="detail-row">
                    <div class="detail-label">Owner/Contact Name</div>
                    <div class="detail-value">{{ detaislone?.contactName }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Owner/Contact Email</div>
                    <div class="detail-value">{{ detaislone?.contactEmail }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Primary Mobile</div>
                    <div class="detail-value">{{ detaislone?.contactMobile }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Secondary Mobile</div>
                    <div class="detail-value">
                      <span *ngIf="detaislone?.secondaryMobile != ''">
                        {{ detaislone?.secondaryMobile }}
                      </span>
                      <span *ngIf="detaislone?.secondaryMobile == ''">-</span>
                    </div>
                  </div>

                  <div class="detail-row">
                    <div class="detail-label">Website</div>
                    <div class="detail-value">
                      <div *ngIf="detaislone?.website != ''">
                        {{ detaislone?.website | slice:0:25 }}
                        <i class="fa-regular fa-copy copy-icon" (click)="copyText(detaislone?.website)"></i>
                        <span *ngIf="copySuccess" class="text-success ml-1">Copied!</span>
                      </div>
                      <div *ngIf="detaislone?.website == ''">-</div>
                    </div>
                  </div>
                </div>

                <!-- Address Information -->
                <div class="detail-section mb-4">
                  <h5 class="section-header">Address Information</h5>
                  <div class="detail-row">
                    <div class="detail-label">Country</div>
                    <div class="detail-value">{{ detaislone?.country }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">State</div>
                    <div class="detail-value">{{ detaislone?.stateName }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">City</div>
                    <div class="detail-value">{{ detaislone?.city }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Pincode</div>
                    <div class="detail-value">{{ detaislone?.zipcode }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Area</div>
                    <div class="detail-value">{{ detaislone?.area }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Billing Address</div>
                    <div class="detail-value">{{ detaislone?.billingAddress }}</div>
                  </div>
                </div>
              </div>

              <!-- Right Column -->
              <div class="col-md-6 col-12">


                <!-- Settings -->
                <div class="detail-section mb-4">
                  <h5 class="section-header">Settings</h5>
                  <div class="detail-row">
                    <div class="detail-label">Manual Trans OTP</div>
                    <div class="detail-value">
                      {{ detaislone?.customerManualStatus === 1 ? 'Enabled' : 'Disabled' }}
                    </div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Offline QR</div>
                    <div class="detail-value">
                      {{ detaislone?.offlineQrEnableStatus === 1 ? 'Yes' : 'No' }}
                    </div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Billing Cycle</div>
                    <div class="detail-value">
                      <span *ngIf="detaislone?.billingMode === 'Month'">Monthly</span>
                      <span *ngIf="detaislone?.billingMode !== 'Month'">-</span>
                    </div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Cloud Fee Applicable</div>
                    <div class="detail-value">
                      {{ detaislone?.cloudFeeEnable}}
                    </div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Cloud Fee Auto Debit</div>
                    <div class="detail-value">
                      {{ detaislone?.autoDebitStatus === 1 ? 'Yes' : 'No' }}
                    </div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Renewal Fee Auto Debit</div>
                    <div class="detail-value">{{ detaislone?.renewalAutoDebit}}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Due Generation Mode</div>
                    <div class="detail-value">{{ detaislone?.customerPaymentMode }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">SMS Merchant Name</div>
                    <div class="detail-value">{{ detaislone?.smsMerchantName }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Reminder Notification</div>
                    <div class="detail-value">
                      {{ detaislone?.customerDuesEnable === 1 ? 'Yes' : 'No' }}
                    </div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Notification Frequency</div>
                    <div class="detail-value">
                      <ng-container *ngIf="detaislone?.customerDuesDate === 1">Daily</ng-container>
                      <ng-container *ngIf="detaislone?.customerDuesDate === 2">Every Two Days</ng-container>
                      <ng-container *ngIf="detaislone?.customerDuesDate === 3">Every Three Days</ng-container>
                      <ng-container *ngIf="detaislone?.customerDuesDate === 4">Once</ng-container>
                      <ng-container *ngIf="detaislone?.customerDuesDate == 0">No Due Date</ng-container>
                    </div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Notification Start Date</div>
                    <div class="detail-value">{{ detaislone?.dueDate }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Onboard Limit</div>
                    <div class="detail-value">{{ detaislone?.merchantPlanModel?.countLimit }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">One-Time Setup Fee</div>
                    <div class="detail-value">{{ detaislone?.technicalAmount }}</div>
                  </div>
                </div>

                <!-- Audit Information -->
                <div class="detail-section">
                  <h5 class="section-header">Audit Information</h5>
                  <div class="detail-row">
                    <div class="detail-label">Created By</div>
                    <div class="detail-value">{{ detaislone?.createdBy }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Created At</div>
                    <div class="detail-value">
                      {{ detaislone?.createdDatetime | date: 'dd/MM/yyyy hh:mm a' }}
                    </div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Modified By</div>
                    <div class="detail-value">{{ detaislone?.modifiedBy }}</div>
                  </div>
                  <div class="detail-row">
                    <div class="detail-label">Modified At</div>
                    <div class="detail-value">
                      {{ detaislone?.modifiedDatetime | date: 'dd/MM/yyyy hh:mm a' }}
                    </div>
                  </div>
                </div>


              </div>
            </div>
          </div>
        </article>
      </div>
      <button class="btn clear"></button>
    </div>

    <!-- LEVEL ONE APPROVAL STARTS -->

    <h5 class="p-2 mx-3 mt-5" style="
        background-color: #bcdf72;
        color: #141e46;
        font-weight: 500;
        font-size: 20px;
      ">
      Level 1 Approval
    </h5>

    <div class="filters">
      <div class="col-12">
        <article class="car-details label-info mt-2">
          <div class="d-flex flex-md-row align-items-md-start align-items-center flex-column">
            <div class="w-100">
              <div class="container-fluid">

                <div class="row">

                  <div class="col-md-6 col-12">
                    <div class="d-flex flex-column">
                      <div class="d-flex mt-3">
                        <div class="w-50 font-weight-bold" [hidden]="valueapproval !== 'Entity View-Approval'">
                          Approval
                        </div>
                        <div class="w-50">
                          <button class="buttonDownload" [hidden]="valueapproval !== 'Entity View-Approval'"
                            (click)="levelOneApproval(this.id)">
                            Approval
                          </button>
                        </div>
                      </div>
                      <div class="d-flex mt-3">
                        <div class="w-50 font-weight-bold">Reviewed By</div>
                        <div class="w-50">
                          <span *ngIf="this.detaislone?.approvedByL1 != null">
                            {{ this.detaislone?.approvedByL1 }}</span>
                          <span *ngIf="this.detaislone?.approvedByL1 == null">-</span>
                        </div>
                      </div>
                      <div class="d-flex mt-3">
                        <div class="w-50 font-weight-bold" [hidden]="valuelevelcomment !== 'Entity View-Comment'">
                          Comments
                        </div>
                        <div class="w-50 mx-2" [hidden]="valuelevelcomment !== 'Entity View-Comment'" style="
                            font-size: 18px;
                            cursor: pointer;
                            color: #141e46;
                          ">
                          <span (click)="leveloneComments(this.detaislone?.comment)"><i
                              class="fas fa-comments"></i></span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-6 col-12">
                    <div class="d-flex mt-2">
                      <div class="w-50 font-weight-bold">Approval Status</div>
                      <div class="w-50">
                        <span style="color: green" *ngIf="detaislone?.approvalStatusL1 == 'approved'">
                          {{ detaislone?.approvalStatusL1 }}
                        </span>
                        <span style="color: red" *ngIf="detaislone?.approvalStatusL1 == 'Rejected'">
                          {{ detaislone?.approvalStatusL1 }}
                        </span>
                        <span style="color: orange" *ngIf="detaislone?.approvalStatusL1 == 'Pending'">
                          {{ detaislone?.approvalStatusL1 }}
                        </span>
                      </div>
                    </div>
                    <div class="d-flex mt-3">
                      <div class="w-50 font-weight-bold">Reviewed At</div>
                      <div class="w-50">
                        <span>
                          {{
                          this.detaislone?.approvedDateTimeL1 != null
                          ? (this.detaislone?.approvedDateTimeL1
                          | date : "dd/MM/yyyy hh:mm a")
                          : "--"
                          }}
                        </span>
                      </div>
                    </div>
                  </div>

                </div>

              </div>
            </div>
          </div>
        </article>
      </div>
      <button class="btn clear"></button>
    </div>

    <!-- LEVEL ONE APPROVAL ENDS -->


  </div>

  <!-- GENERAL INFO ENDS -->


  <!-- BANK  INFO STARTS -->

  <div *ngIf="activeTab === 'materials'">

    <mat-card-header>
      <div class="row d-flex justify-content-start">
        <div class="col-md-3">
          <div class="search">
            <form class="form">
              <label for="search">
                <input (ngModelChange)="onSearchTextChange()" #input name="search" required autocomplete="off"
                  placeholder="Search" id="search" type="text" [(ngModel)]="searchText" />
                <div class="icon">
                  <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg" class="swap-on">
                    <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round"
                      stroke-linecap="round"></path>
                  </svg>
                </div>
                <button type="reset" class="close-btn">
                  <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                    <path clip-rule="evenodd"
                      d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                      fill-rule="evenodd"></path>
                  </svg>
                </button>
              </label>
            </form>
          </div>
        </div>

        <div class="col-md-1 mt-1">
          <button (click)="Entitybanksearch(id, input.value)" style="
              color: white;
              background-color: #141e46;
              border-radius: 10px;
              font-size: 12px;
            " mat-raised-button>
            Go
          </button>
        </div>


        <div class="col-md-2 mt-1">
          <button (click)="addbank(this.id)" [hidden]="valuebankadd !== 'Bank-Add'" style="
              color: white;
              background-color: #141e46;
              border-radius: 10px;
              font-size: 12px;
            " mat-raised-button>
            Add Bank
          </button>
        </div>


      </div>
    </mat-card-header>

    <div class="row mt-3">
      <div class="col-12 mb-3 mb-lg-5">
        <div class="card table-nowrap table-card">
          <div class="table-responsive text-nowrap text-center">
            <table class="table table-hover" id="customers">
              <tr>
                <th>S No</th>
                <th>Beneficiary Name</th>
                <th>Account Number</th>
                <th>Account Type</th>
                <th>Type Mode</th>
                <th>IFSC Code</th>
                <th>PG Ledger Id</th>
                <th>Bank Name</th>
                <th>Branch Name</th>
                <th [hidden]="valuebanksts !== 'Bank-Status'">Bank Status</th>
                <th [hidden]="valueprimarysts !== 'Bank Primary-Status'">Primary Status</th>
                <th [hidden]="valuebankapproval !== 'Bank-Approval'">Approval</th>
                <th [hidden]="valuebankapprovalsts !== 'Bank-Approval Status'">Approval Status</th>
                <th>Reviewed By</th><!-- approved BY -->
                <th>Reviewed At</th> <!-- approved datetime -->
                <th [hidden]="valuebankcomment !== 'Bank-comment'">Comments</th>
                <th [hidden]="valuebankedit !== 'Bank-Edit'">Action</th>
                <th [hidden]="valuebankverify !== 'Bank-Verification'">Verification</th>
                <th>Verification Status</th>
                <th>Created By</th>
                <th>Created At</th>
                <th>Modified By</th>
                <th>Modified At</th>
              </tr>

              <tbody
                *ngFor="let item of bankdetails| search : searchText| paginate: {id: 'pagination',itemsPerPage: itemsPerPage,currentPage: currentPage};let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ item.accountHolderName }}</td>
                <td>{{ item.accountNumber }}</td>
                <td>{{ item.accountType }}</td>
                <td>{{ item.typeMode }}</td>
                <td>{{ item.ifscCode }}</td>
                <td>{{ item.ledgerId }}</td>
                <td>{{ item.bankId.bankName }}</td>
                <td>{{ item.branchName }}</td>
                <td [hidden]="valuebanksts !== 'Bank-Status'">
                  <span>
                    <mat-slide-toggle class="example-margin" color="primary" [checked]="item.activeStatus == 1"
                      (change)="bankStatus($event, item.merchantBankId)" style="transform: scale(0.9);padding:0">
                    </mat-slide-toggle>
                  </span>
                </td>
                <td [hidden]="valueprimarysts !== 'Bank Primary-Status'">
                  <span>
                    <mat-slide-toggle class="example-margin" color="primary" [checked]="item.primaryAccountStatus == 1"
                      (change)="onSubmit($event, item.merchantBankId)" style="transform: scale(0.9);padding:0">
                    </mat-slide-toggle>
                  </span>
                </td>
                <td [hidden]="valuebankapproval !== 'Bank-Approval'">
                  <button [disabled]="item?.approvalStatus === 'approved'" class="buttonDownload"
                    (click)="BankApproval(item.merchantBankId)" style="font-size:14px;padding:2px">
                    Approval
                  </button>
                </td>
                <td [hidden]="valuebankapprovalsts !== 'Bank-Approval Status'"
                  [ngClass]="{yellow: item?.approvalStatus === 'Pending',green: item?.approvalStatus === 'approved',Red: item?.approvalStatus == 'Rejected'}">
                  {{ item.approvalStatus }}
                </td>
                <td>{{ item.approvalBy !=null ? (item.approvalBy) : "-"}}</td> <!-- approved BY -->
                <td>
                  {{ item.approvalDateTime != "NA" ? (item.approvalDateTime | date: "dd/MM/yyyy hh:mm a") : "-"}}
                </td> <!-- approved datetime -->
                <td [hidden]="valuebankcomment !== 'Bank-comment'">
                  <span (click)="BankComments(item.reMarks)">
                    <i class="fas fa-comments" style="
                        text-align: center;
                        cursor: pointer;
                        font-size: 15px;
                        color: #545497;
                      ">
                    </i>
                  </span>
                </td>
                <td [hidden]="valuebankedit !== 'Bank-Edit'">
                  <span>
                    <i style="
                        text-align: center;
                        cursor: pointer;
                        font-size: 15px;
                        color: #545497;
                      " (click)="editbank(item)" class="fas fa-edit">
                    </i>
                  </span>
                </td>
                <td [hidden]="valuebankverify !== 'Bank-Verification'">
                  <span>
                    <i style="overflow: hidden; color: #141e46; font-size: 17px" [matMenuTriggerFor]="menu"
                      class="fa-solid fa-circle-info">
                      <mat-menu #menu="matMenu">
                        <button [disabled]="
                            item.facheckStatus == 0 || item.facheckStatus == 2
                          " style="font-size: 10px" mat-menu-item (click)="bankInfo(item.bavId)">
                          Info
                        </button>
                        <button style="font-size: 10px" mat-menu-item [disabled]="item.facheckStatus == 1"
                          (click)="bankVerification(item.merchantBankId)">
                          Verify
                        </button>
                        <button style="font-size: 10px" mat-menu-item [disabled]="
                            item.facheckStatus == 0 || item.facheckStatus == 2
                          " (click)="bankVerification(item.merchantBankId)">
                          Re-Verify
                        </button>
                        <button style="font-size: 10px" mat-menu-item [disabled]="
                            item.facheckStatus == 0 || item.facheckStatus == 2
                          " (click)="BankVerificationMatch(item)">
                          Verification Matching
                        </button>
                      </mat-menu>
                    </i>
                  </span>
                </td>
                <td>
                  <span *ngIf="item.facheckStatus == 0" class="text-danger">Not-Verified</span>
                  <span *ngIf="item.facheckStatus == 1" class="text-success">Verified</span>
                </td>
                <td>{{ item.createdBy }}</td>
                <td>{{ item.createdDateTime | date : "dd/MM/yyyy hh:mm:a" }}</td>
                <td>{{ item.modifiedBy }}</td>
                <td>{{ item.modifiedDateTime | date : "dd/MM/yyyy hh:mm:a" }}</td>
              </tbody>
            </table>
          </div>
          <div class="text-end mt-2">
            <pagination-controls id="pagination" (pageChange)="currentPage = $event"></pagination-controls>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- BANK  INFO ENDS -->


  <!-- KYC DOC  INFO STARTS -->

  <div *ngIf="activeTab === 'videos'">

    <mat-card-header>
      <button [hidden]="valuekycadd !== 'Entity View KYC Document-add'" [hidden]="KYCDetails.length > 0"
        (click)="addKycdocuments(this.id)" style="
          color: white;
          background-color: #141e46;
          border-radius: 10px;
          font-size: 12px;
        " mat-raised-button>
        Add KYC
      </button>
    </mat-card-header>

    <div class="row mt-3">
      <div class="col-12 mb-3 mb-lg-5">
        <div class="card table-nowrap table-card">
          <div class="table-responsive text-nowrap text-center">
            <table class="table table-hover" id="customers">
              <tr>
                <th>S No</th>
                <th>Document Type</th>
                <th>Document Name</th>
                <th>Document ID</th>
                <th [hidden]="valuekycimage !== 'Entity View KYC Document-Image'">Document Image</th>
                <th [hidden]="valuekycedit !== 'Entity View KYC Document-Edit'">Action</th>
                <th [hidden]="valuekycverification !=='Entity View KYC Document-Verification'">Verification</th>
                <th>Verification Status</th>
                <th [hidden]="valuekycapproval !== 'Entity View KYC Document-Approval'">Approval</th>
                <th>Approval Status</th>
                <th>Reviewed By</th>
                <th>Reviewed At</th>
                <th [hidden]="valuekyccomment !== 'Entity View KYC Document-comments'">Comments</th>
                <th>Created By</th>
                <th>Created At</th>
                <th>Modified By</th>
                <th>Modified At</th>
              </tr>

              <tbody *ngFor="let item of KYCDetails">
 
              <!-- Identity proof STARTS -->
               
              <tr>
                  <td>1</td>
                  <td>Identity proof</td>
                  <td>{{ item.identityProof }}</td>
                  <td>{{ item.identityProofNo }}</td>
                  <td [hidden]="valuekycimage !== 'Entity View KYC Document-Image'">
                    <span (click)="getFrontPath(item.proofId)">
                      <i class="fa-regular fa-image" style="font-size: 15px; cursor: pointer; color: #545497">
                      </i>
                    </span>
                    <span (click)="getBackPath(item.proofId)">
                      <i class="fa-regular fa-image mx-1" style="font-size: 15px; cursor: pointer; color: #545497"></i>
                    </span>
                  </td>
                  <td [hidden]="valuekycedit !== 'Entity View KYC Document-Edit'">
                    <i class="fas fa-edit" (click)="identityedit(item)"> </i>
                  </td>
                  <td [hidden]="valuekycverification !=='Entity View KYC Document-Verification'">
                    <span>
                      <i style="
                          overflow: hidden;
                          color: #141e46;
                          font-size: 20px;
                        " [matMenuTriggerFor]="menu1" class="fa-solid fa-circle-info">
                        <mat-menu #menu1="matMenu">
                          <button [disabled]="
                              item.identityFacheckStatus == 0 ||
                              item.identityFacheckStatus == 2
                            " style="font-size: 10px" mat-menu-item (click)="
                              KycInfo(item.identityKycId, item.identityProof)
                            ">
                            Info
                          </button>
                          <button style="font-size: 10px" mat-menu-item [disabled]="item.identityFacheckStatus == 1"
                            (click)="
                              kycVerificationsIdentity(
                                item.identityProofNo,
                                item.proofId,
                                item.identityProof,
                                item.drivingLicenceDob,
                                item.passportDob
                              )
                            ">
                            Verify
                          </button>
                          <button style="font-size: 10px" mat-menu-item [disabled]="
                              item.identityFacheckStatus == 0 ||
                              item.identityFacheckStatus == 2
                            " (click)="
                              kycVerificationsIdentity(
                                item.identityProofNo,
                                item.proofId,
                                item.identityProof,
                                item.drivingLicenceDob,
                                item.passportDob
                              )
                            ">
                            Re-Verify
                          </button>
                        </mat-menu>
                      </i>
                    </span>
                  </td>
                  <td class="text-center">
                    <span *ngIf="item.identityFacheckStatus == 0" style="font-size: 14px; color: red">Pending</span>
                    <span *ngIf="item.identityFacheckStatus == 1" style="font-size: 14px; color: green">Verified</span>
                    <span *ngIf="item.identityFacheckStatus == 2" style="font-size: 14px; color: red"> Failed</span>
                  </td>
                  <td [hidden]="valuekycapproval !== 'Entity View KYC Document-Approval'">
                    <button class="buttonDownload" (click)="KycApproval(item)" [disabled]="
                        item.identityAdminApprovalStatus == 'approved'" style="font-size:14px;padding:2px">
                      Approval
                    </button>
                  </td>
                  <td [ngClass]="{
                      yellow: item?.identityAdminApprovalStatus === 'Pending',
                      green: item?.identityAdminApprovalStatus === 'approved',
                      Red: item?.identityAdminApprovalStatus == 'Rejected'
                    }">
                    {{ item.identityAdminApprovalStatus }}
                  </td>
                  <td>{{ item.identityAdminApprovedBy !=null ? (item.identityAdminApprovedBy) : "-"}}</td>
                  <td>
                  {{item.identityAdminApprovedDate != "NA" ? (item.identityAdminApprovedDate | date: "dd/MM/yyyyhh:mm a") : "-"}}
                </td>
                <td [hidden]=" valuekyccomment !== 'Entity View KYC Document-comments'">
                    <span (click)="KYCComments(item.identityAdminComments)">
                      <i class="fas fa-comments" style="
                          text-align: center;
                          cursor: pointer;
                          font-size: 15px;
                          color: #545497;
                        ">
                        </i>
                      </span>
                  </td>
                  <td>{{ item.createdBy }}</td>
                  <td>{{ item.createdDateTime | date : "dd/MM/yyyy hh:mm a" }}</td>
                  <td>{{ item.modifiedBy }}</td>
                  <td>{{ item.modifiedDateTime | date : "dd/MM/yyyy hh:mm a" }}</td>
               </tr>
               
               <!-- Identity proof ENDS -->

              <!-- Address proof STARTS -->
              
              <tr>
                  <td>2</td>
                  <td>Address proof</td>
                  <td>{{ item.addressProof }}</td>
                  <td>{{ item.addressProofNo }}</td>
                  <td [hidden]="valuekycimage !== 'Entity View KYC Document-Image'">
                    <span (click)="addressProofFrontPath(item.proofId)">
                      <i class="fa-regular fa-image"
                        style="font-size: 15px; cursor: pointer; color: #545497">
                      </i>
                    </span>
                    <span (click)="addressProofBackPath(item.proofId)">
                      <i class="fa-regular fa-image mx-1"
                        style="font-size: 15px; cursor: pointer; color: #545497">
                      </i>
                    </span>
                  </td>
                  <td [hidden]="valuekycedit !== 'Entity View KYC Document-Edit'">
                    <i class="fas fa-edit" (click)="addressedits(item)"></i>
                  </td>
                  <td [hidden]=" valuekycverification !=='Entity View KYC Document-Verification'">
                    <span>
                      <i style="
                          overflow: hidden;
                          color: #141e46;
                          font-size: 20px;
                        " [matMenuTriggerFor]="menu2" class="fa-solid fa-circle-info">
                        <mat-menu #menu2="matMenu">
                          <button [disabled]="
                              item.addressFacheckStatus == 0 ||
                              item.addressFacheckStatus == 2
                            " style="font-size: 10px" mat-menu-item (click)="
                              KycInfo(item.addressKycId, item.addressProof)
                            ">
                            Info
                          </button>
                          <button style="font-size: 10px" mat-menu-item [disabled]="item.addressFacheckStatus == 1"
                            (click)="
                              kycVerificationsAddress(
                                item.addressProofNo,
                                item.proofId,
                                item.addressProof,
                                item.drivingLicenceDob,
                                item.passportDob
                              )
                            ">
                            Verify
                          </button>
                          <button style="font-size: 10px" mat-menu-item [disabled]="
                              item.addressFacheckStatus == 0 ||
                              item.addressFacheckStatus == 2
                            " (click)="
                              kycVerificationsAddress(
                                item.addressProofNo,
                                item.proofId,
                                item.addressProof,
                                item.drivingLicenceDob,
                                item.passportDob
                              )
                            ">
                            Re-Verify
                          </button>
                        </mat-menu>
                      </i>
                    </span>
                  </td>
                  <td class="text-center">
                    <span *ngIf="item.addressFacheckStatus == 0" style="font-size: 14px; color: red"> Pending</span>
                    <span *ngIf="item.addressFacheckStatus == 1" style="font-size: 14px; color: green">Verified</span>
                    <span *ngIf="item.addressFacheckStatus == 2" style="font-size: 14px; color: red">Failed</span>
                  </td>
                  <td [hidden]="valuekycapproval !== 'Entity View KYC Document-Approval'">
                    <button class="buttonDownload" (click)="KycApproval1(item)"
                    [disabled]="item.addressAdminApprovalStatus == 'approved'" style="font-size:14px;padding:2px">
                    Approval
                    </button>
                  </td>
                  <td [ngClass]="{
                      yellow: item?.addressAdminApprovalStatus === 'Pending',
                      green: item?.addressAdminApprovalStatus === 'approved',
                      Red: item?.addressAdminApprovalStatus == 'Rejected'
                    }">
                    {{ item.addressAdminApprovalStatus }}
                  </td>

                  <td>{{ item.addressAdminApprovedBy !=null ? (item.addressAdminApprovedBy) : "-"}}</td>
                  <td>
                  {{ item.addressAdminApprovedDate != "NA" ? (item.addressAdminApprovedDate | date: "dd/MM/yyyy hh:mm a") : "-"}}
                  </td>
                  <td [hidden]="valuekyccomment !== 'Entity View KYC Document-comments'">
                    <span (click)="KYCComments(item.addressAdminComments)">
                      <i class="fas fa-comments" style="
                          text-align: center;
                          cursor: pointer;
                          font-size: 15px;
                          color: #545497;
                        ">
                        </i>
                      </span>
                  </td>
                  <td>{{ item.createdBy }}</td>
                  <td>{{ item.createdDateTime | date : "dd/MM/yyyy hh:mm a" }}</td>
                  <td>{{ item.addressModifiedBy }}</td>
                  <td>{{ item.addressModifiedAt | date : "dd/MM/yyyy hh:mm a" }}</td>
              </tr>

              <!-- Address proof ENDS -->

              <!-- 	Signature proof STARTS -->

                <tr>
                  <td>3</td>
                  <td>Signature proof</td>
                  <td>{{ item.signatureProof }}</td>
                  <td>{{ item.signatureProofNo }}</td>
                  <td [hidden]="valuekycimage !== 'Entity View KYC Document-Image'">
                    <span (click)="signatureProofFrontPath(item.proofId)">
                      <i class="fa-regular fa-image"
                        style="font-size: 15px; cursor: pointer; color: #545497">
                      </i>
                    </span>
                    <span (click)="signatureProofBackPath(item.proofId)">
                      <i class="fa-regular fa-image mx-1"
                        style="font-size: 15px; cursor: pointer; color: #545497">
                      </i>
                    </span>
                  </td>
                  <td [hidden]="valuekycedit !== 'Entity View KYC Document-Edit'">
                    <i class="fas fa-edit" (click)="signatureedits(item)"></i>
                  </td>
                  <td [hidden]="
                      valuekycverification !==
                      'Entity View KYC Document-Verification'
                    ">
                    <span>
                      <i style="
                          overflow: hidden;
                          color: #141e46;
                          font-size: 20px;
                        " [matMenuTriggerFor]="menu3" class="fa-solid fa-circle-info">
                        <mat-menu #menu3="matMenu">
                          <button [disabled]="
                              item.signatureFacheckStatus == 0 ||
                              item.signatureFacheckStatus == 2
                            " style="font-size: 10px" mat-menu-item (click)="
                              KycInfo(item.signatureKycId, item.signatureProof)
                            ">
                            Info
                          </button>
                          <button style="font-size: 10px" mat-menu-item [disabled]="item.signatureFacheckStatus == 1"
                            (click)="
                              kycVerificationsSignature(
                                item.signatureProofNo,
                                item.proofId,
                                item.signatureProof,
                                item.drivingLicenceDob,
                                item.passportDob
                              )
                            ">
                            Verify
                          </button>
                          <button style="font-size: 10px" mat-menu-item [disabled]="
                              item.signatureFacheckStatus == 0 ||
                              item.signatureFacheckStatus == 2
                            " (click)="
                              kycVerificationsSignature(
                                item.signatureProofNo,
                                item.proofId,
                                item.signatureProof,
                                item.drivingLicenceDob,
                                item.passportDob
                              )
                            ">
                            Re-Verify
                          </button>
                        </mat-menu>
                      </i>
                    </span>
                  </td>
                  <td class="text-center">
                    <span *ngIf="item.signatureFacheckStatus == 0" style="font-size: 14px; color: red">Pending</span>
                    <span *ngIf="item.signatureFacheckStatus == 1" style="font-size: 14px; color: green">Verified</span>
                    <span *ngIf="item.signatureFacheckStatus == 2" style="font-size: 14px; color: red">Failed</span>
                  </td>
                  <td [hidden]="valuekycapproval !== 'Entity View KYC Document-Approval'">
                    <button class="buttonDownload" (click)="KycApproval2(item)" [disabled]="
                        item.signatureAdminApprovalStatus == 'approved'
                      " style="font-size:14px;padding:2px">
                      Approval
                    </button>
                  </td>
                  <td [ngClass]="{
                      yellow: item?.signatureAdminApprovalStatus === 'Pending',
                      green: item?.signatureAdminApprovalStatus === 'approved',
                      Red: item?.signatureAdminApprovalStatus == 'Rejected'
                    }">{{ item.signatureAdminApprovalStatus }}
                  </td>
                  <td>{{ item.signatureAdminApprovedBy!=null ? (item.signatureAdminApprovedBy) : "-"}}</td>
                  <td>
                 {{ item.signatureAdminApprovedDate != "NA" ? (item.signatureAdminApprovedDate | date: "dd/MM/yyyy hh:mm a") : "-"}}
                  </td>
                  <td [hidden]="valuekyccomment !== 'Entity View KYC Document-comments'">
                  <span (click)="KYCComments(item.signatureAdminComments)">
                    <i class="fas fa-comments" style="
                          text-align: center;
                          cursor: pointer;
                          font-size: 15px;
                          color: #545497;
                        ">
                        </i>
                  </span>
                  </td>
                  <td>{{ item.createdBy }}</td>
                  <td>{{ item.createdDateTime | date : "dd/MM/yyyy hh:mm a" }}</td>
                  <td>{{ item.signatureModifiedBy }}</td>
                  <td>{{ item.signatureModifiedAt | date : "dd/MM/yyyy hh:mm a" }}</td>
                </tr>

              <!-- 	Signature proof ENDS -->

              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

   <!-- KYC DOC  INFO ENDS -->

 
   <!-- Business DOC  INFO STARTS -->

  <div *ngIf="activeTab === 'bussiness'">
  
    <mat-card-header>
      <div class="row d-flex justify-content-start">
        <div class="col-md-3">
          <div class="search">
            <form class="form">
              <label for="search">
                <input (ngModelChange)="onSearchTextBusiness()" #input name="search" required autocomplete="off"
                  placeholder="Search" id="search" type="text" [(ngModel)]="searchTextbusnniess" />
                  <div class="icon">
                  <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg" class="swap-on">
                    <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round"
                      stroke-linecap="round"></path>
                  </svg>
                </div>
                <button type="reset" class="close-btn">
                  <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                    <path clip-rule="evenodd"
                      d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                      fill-rule="evenodd"></path>
                  </svg>
                </button>
              </label>
            </form>
          </div>
        </div>
        <div class="col-md-2 mt-1">
          <button (click)="adddoc(this.id,this.detaislone?.businessCategoryModel?.businessCategoryId)
            " [hidden]="valuebussinessAdd !== 'Entity View Bussiness Document-Add' " style="
              color: white;
              background-color: #141e46;
              border-radius: 10px;
              font-size: 12px;
            " mat-raised-button>
            Add Document
          </button>
        </div>
      </div>
    </mat-card-header>


    <div class="row mt-3">
      <div class="col-12 mb-3 mb-lg-5">
        <div class="card table-nowrap table-card">
          <div class="table-responsive text-nowrap text-center">
            <table class="table table-hover" id="customers">
              <tr>
                <th>S No</th>
                <th>Document Name</th>
                <th>Document ID</th>
                <th>Document Expiry Date</th>
                <th [hidden]="valuebussinessImage !=='Entity View Bussiness Document-Image'">Image</th>
                <th [hidden]="valuebussinessapproval !=='Entity View Bussiness Document-Approval'">Approval</th>
                <th>Approval Status</th>
                <th>Reviewed By</th>
                <th>Reviewed At</th>
                <th [hidden]="valuebussinesscomment !=='Entity View Bussiness Document-Comments'">Comments</th>
                <th [hidden]="valuebussinessedit !== 'Entity View Bussiness Document-Edit'">Action</th>
                <th>Created By</th>
                <th>Created At</th>
                <th>Modified By</th>
                <th>Modified At</th>
              </tr>
              <tbody *ngFor=" let item of bussinessdoc| search : searchTextbusnniess | paginate : {id: 'pagination2',itemsPerPage: itemsPerPage,currentPage: currentPagebusniess};let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ item?.entityKycCategory?.kycCategoryName }}</td>
                <td>{{ item.docNumber }}</td>
                <td>{{ item.expiryDate | date : "dd/MM/yyyy" }}</td>
                <td [hidden]=" valuebussinessImage !=='Entity View Bussiness Document-Image'">
                  <span (click)="getdocFrontPath(item.merchantDocumentId)">
                    <i class="fa-regular fa-image"
                      style="font-size: 15px; cursor: pointer; color: #545497">
                    </i>
                  </span>
                  <span (click)="getdocbackPath(item.merchantDocumentId)">
                    <i class="fa-regular fa-image mx-1"
                      style="font-size: 15px; cursor: pointer; color: #545497">
                    </i>
                  </span>
                </td>
                <td [hidden]="valuebussinessapproval !=='Entity View Bussiness Document-Approval'">
                  <button class="buttonDownload" (click)="docApproval(item)"
                    [disabled]="item.approvalStatus == 'approved'" style="font-size:14px;padding:2px">
                    Approval
                  </button>
                </td>
                <td [ngClass]="{
                    yellow: item?.approvalStatus === 'Pending',
                    green: item?.approvalStatus === 'approved',
                    Red: item?.approvalStatus == 'Rejected'
                  }">{{ item.approvalStatus }}
                </td>
                <td>{{ item.approvalBy }}</td>
                <td>{{ item.approvalDateTime | date : "dd/MM/yyyy hh:mm a" }}</td>
                <td [hidden]="valuebussinesscomment !=='Entity View Bussiness Document-Comments'">
                  <span (click)="DocComments(item.reMarks)">
                    <i class="fas fa-comments" style="
                        text-align: center;
                        cursor: pointer;
                        font-size: 15px;
                        color: #545497;
                      ">
                      </i>
                    </span>
                </td>
                <td [hidden]="valuebussinessedit !== 'Entity View Bussiness Document-Edit'">
                  <i class="fas fa-edit" style="padding:0" (click)="docedit(item)"> </i>
                </td>
                <td>{{ item.createdBy }}</td>
                <td>{{ item.createdDateTime | date : "dd/MM/yyyy hh:mm a" }}</td>
                <td>{{ item.modifiedBy}}</td>
                <td>{{ item.modifiedDateTime | date : "dd/MM/yyyy hh:mm a" }}</td>
              </tbody>
            </table>
          </div>
          <div class="text-end mt-2">
            <pagination-controls id="pagination2" (pageChange)="currentPagebusniess = $event"></pagination-controls>
          </div>
        </div>
      </div>
    </div>
  </div>

    <!-- Business DOC  INFO ENDS -->


  <!-- FINAL APPROVEL  INFO STARTS -->

  <div *ngIf="activeTab === 'doot1'">
    <div class="row mt-2">
      <div class="col-12 mb-3 mb-lg-5">
        <div class="card table-nowrap table-card">
          <div class="table-responsive text-nowrap text-center">
            <table class="table table-hover" id="customers">
              <tr>
                <th>S No</th>
                <th>Approval</th>
                <th>Approval Status</th>
                <th [hidden]="valuefinalcomment !== 'Final-Comment'">Comments</th>
                <th>Reviewed By</th>
                <th>Reviewed At</th>
              </tr>
              <tbody>
                <td class="text-center">1</td>
                <td class="text-center" [hidden]="valuefinalapprovals !== 'Final-Approval'">
                  <span>
                    <button class="buttonDownload" (click)="levelTwoApproval(this.id)" [hidden]="
                        this.detaislone?.approvalStatusL1 == 'Pending' ||
                        this.detaislone?.approvalStatusL1 == 'Rejected'
                      ">
                      Approval
                    </button>
                  </span>
                </td>
                <td class="text-center">
                  <span style="color: green" *ngIf="detaislone?.approvalStatusL2 == 'approved'">{{
                    this.detaislone?.approvalStatusL2 }}</span>
                  <span style="color: orange" *ngIf="detaislone?.approvalStatusL2 == 'Pending'">{{
                    this.detaislone?.approvalStatusL2 }}</span>
                  <span style="color: red" *ngIf="detaislone?.approvalStatusL2 == 'Rejected'">{{
                    this.detaislone?.approvalStatusL2 }}</span>
                </td>
                <td [hidden]="valuefinalcomment !== 'Final-Comment'" style="
                    text-align: center;
                    font-size: 15px;
                    cursor: pointer;
                    color: #545497;
                  ">
                  <span (click)="levelTwoComments(this.detaislone?.commentL2)"><i class="fas fa-comments"></i></span>
                </td>
                <td class="text-center">
                 {{ detaislone.approvedByL2 !=null ? (detaislone.approvedByL2) : "-"}}
                </td>
                <td class="text-center">
                {{ detaislone.approvedDateTimeL2 != "NA" ? (detaislone.approvedDateTimeL2 | date: "dd/MM/yyyy hh:mm a") : "-"}}
              </td>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- FINAL APPROVEL  INFO ENDS -->


  <!-- ONE-TIME-SETUP-FEE   INFO STARTS -->

  <div *ngIf="activeTab === 'doot2'">
   <mat-card-header>
    <div class="row d-flex justify-content-start">
      <div class="col-md-3">
        <div class="search">
          <form class="form">
            <label for="search">
              <input (ngModelChange)="onSearchTextonetime()" #input name="search" required autocomplete="off"
                placeholder="Search" id="search" type="text" [(ngModel)]="searchTextOneTime" />
                <div class="icon">
                <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                  xmlns="http://www.w3.org/2000/svg" class="swap-on">
                  <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round" stroke-linecap="round">
                  </path>
                </svg>
              </div>
              <button type="reset" class="close-btn">
                <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                  <path clip-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    fill-rule="evenodd"></path>
                </svg>
              </button>
            </label>
          </form>
        </div>
      </div>
      <div class="col-md-2 mt-1" [hidden]="valuemanualpay !== 'Entity View One Time Setup Payment-Create'">
        <button (click)="createmanualPayement()" [hidden]="paymentStatus == 'Success' || onBoardStatus == 'false'"
          style="
            color: white;
            background-color: #141e46;
            border-radius: 10px;
            font-size: 12px;
            width: 120%;
          " mat-raised-button>
          Manual Payment
        </button>
      </div>
    </div>
  </mat-card-header>

  <div class="row mt-3">
    <div class="col-12 mb-3 mb-lg-5">
      <div class="card table-nowrap table-card">
        <div class="table-responsive text-nowrap text-center">
          <table class="table table-hover" id="customers">
            <tr>
              <th>S No</th>
              <th>Payment ID</th>
              <th>Payment For</th>
              <th>Due Amount</th>
              <th [hidden]="valuemanualedit !== 'Entity View One Time Setup Payment-Edit'">
              <span style="background-color: #bcdf72" *ngIf="
                    paymentMethod == 'Cash' ||
                    paymentMethod == 'UPI' ||
                    paymentMethod == 'NEFT' ||
                    paymentMethod == 'RTGS' ||
                    paymentMethod == 'IMPS' ||
                    paymentMethod == 'Cheque'
                  ">Edit
                </span>
              </th>
              <th>Payment Status</th>
              <th>Payment Method</th>
              <th [hidden]="valuemanualview !== 'Entity View One Time Setup Payment-View'">View</th>
              <th>Reference Number</th>
              <th>Cheque Date</th>
              <th>Manual CreatedBy</th>
              <!-- <th>Manual UpdatedBy</th>
              <th>Manual Updated At</th> -->
              <th>Paid At</th>
            </tr>
            <tbody *ngFor="let item of manualDetails| search : searchTextOneTime| paginate: {id: 'pagination3',itemsPerPage: itemsPerPage,currentPage: currentonetime };let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ item.pgPaymentId }}</td>
              <td>
                <span *ngIf="item?.status=='1'">One Time Paymnent</span>
                <span *ngIf="item?.status=='2'">Renewal Payment</span>
              </td>
              <td>{{ item.totalPayableAmount?.toFixed(2)}}</td>
              <td [hidden]="valuemanualedit !== 'Entity View One Time Setup Payment-Edit'">
                <button style="border: none;font-size: 15px;padding:0" *ngIf="
                    paymentMethod == 'Cash' ||
                    paymentMethod == 'UPI' ||
                    paymentMethod == 'NEFT' ||
                    paymentMethod == 'RTGS' ||
                    paymentMethod == 'IMPS' ||
                    paymentMethod == 'Cheque'
                  " (click)="manualPayement(item)">
                  <span>
                    <i class="fas fa-edit" style="font-size: 15px; color: rgb(39, 39, 95)"></i>
                  </span>
                </button>
              </td>
              <td>
                <span *ngIf="item?.paymentStatus == 'Success'" class="text-success">
                  Success
                </span>
                <span *ngIf="item?.paymentStatus == 'Due Pending'" class="text-warning">
                 Due Pending
                </span>
                <span *ngIf="item?.paymentStatus == 'Initiated'" class="text-primary">
               Initiated
                </span>
                <span *ngIf="item?.paymentStatus == 'Failure'" class="text-danger">
                  Failure
                </span>
                <span *ngIf="item?.paymentStatus == 'Payment Incomplete'" class="text-warning">
                Payment Incomplete
                </span>
              </td>
              <td>{{ item.paymentMethod }}</td>
              <td [hidden]="valuemanualview !== 'Entity View One Time Setup Payment-View'">
              <span (click)="viewmanualtransaction(item.merchantPayId)">
              <i class="fas fa-eye" style="font-size: 16px; color: rgb(39, 39, 95)"></i>
              </span>
              </td>
              <td>{{ item.utrNumber || "-" }}</td>
              <td>
                <span [hidden]="item.date == null">{{ item.date | date : "dd/MM/yyyy" }}</span>
                <span [hidden]="item.date != null"> -</span>
              </td>
              <td>{{ item?.manualApprovalBy || "-" }}</td>
              <!-- <td>{{ item?.updatedBy || "-" }}</td>
              <td>
                <span [hidden]="item.date == null">{{ item.updateAt | date : "dd/MM/yyyy" }}</span>
                <span [hidden]="item.updateAt != null"> - </span>
              </td> -->
              <td>{{ item.paymentDateTime | date : "dd/MM/yyyy hh:mm a" }}</td>
            </tbody>
          </table>
        </div>
        <div class="text-end mt-2">
          <pagination-controls id="pagination3" (pageChange)="currentonetime = $event"></pagination-controls>
        </div>
      </div>
    </div>
  </div>

   </div>

  <!-- ONE-TIME-SETUP-FEE   INFO ENDS -->

  <!-- CUSTAMIZED PAYMENTS   INFO STARTS -->
 
  <div *ngIf="activeTab === 'doot3'">
    
  <mat-card-header>
    <div class="row d-flex justify-content-start">
      <div class="col-md-3">
        <div class="search">
          <form class="form">
            <label for="search">
              <input (ngModelChange)="onSearchTextcustomized()" #input name="search" required autocomplete="off"
                placeholder="Search" id="search" type="text" [(ngModel)]="searchTextcustomixed" />
                <div class="icon">
                <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                  xmlns="http://www.w3.org/2000/svg" class="swap-on">
                  <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round" stroke-linecap="round">
                  </path>
                </svg>
              </div>
              <button type="reset" class="close-btn">
                <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                  <path clip-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    fill-rule="evenodd"></path>
                </svg>
              </button>
            </label>
          </form>
        </div>
      </div>
      <div class="col-md-2 mt-1" [hidden]="detaislone?.onBoardStatus != 'true'">
        <button (click)="otherPayement()" style="
            color: white;
            background-color: #141e46;
            border-radius: 10px;
            font-size: 12px;
          " mat-raised-button [hidden]="valueCustomizedadd !== 'Entity View Customized Payment-Add'">
          Create
        </button>
      </div>
    </div>
  </mat-card-header>
  
  <div class="row mt-3">
    <div class="col-12 mb-3 mb-lg-5">
      <div class="card table-nowrap table-card">
        <div class="table-responsive text-nowrap text-center">
          <table class="table table-hover" id="customers">
            <tr>
              <th>S No</th>
              <th>Service Name</th>
              <th>Service Amount</th>
              <th>Cgst</th>
              <th>Sgst</th>
              <th>Igst</th>
              <th>Total Amount</th>
              <th [hidden]="valueCustomizedmanual !=='Entity View Customized Manual Payment'">Manual Payment</th>
              <th [hidden]="valueCustomizededit !== 'Entity View Customized Payment-Edit'">Action</th>
              <th [hidden]="valueCustomizedview !== 'Entity View Customized Payment-View'">View</th>
              <th>Payment Status</th>
              <th>Paid At</th>
            </tr>
            <tbody *ngFor="let item of otherDetails| search : searchTextcustomixed| paginate: {id: 'pagination4',
            itemsPerPage: itemsPerPage,currentPage: currentcustomized};let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ item.serviceName }}</td>
              <td>{{ item.paidAmount.toFixed(2) }}</td>
              <td>{{ item.cgstPercentage }}</td>
              <td>{{ item.sgstPercentage }}</td>
              <td>{{ item.igstPercentage }}</td>
              <td>{{ item.totalPayableAmount.toFixed(2) }}</td>
              <td>
                <button [disabled]="
                    item.paymentStatus == 'Success' ||
                    item.paymentStatus == 'Due Cancelled'
                  " [hidden]="valueCustomizedmanual !=='Entity View Customized Manual Payment'
                  " style="border: none; background: none;font-size:15px;padding:0" class="manual"
                  (click)="Manuvalpayments(item.payId)">
                  <i style="font-size:15px" class="fa-solid fa-address-card"></i>
                </button>
              </td>
              <td>
                <button class="editcustom" style="background: none; border: none;font-size:15px;padding:0"
                (click)="editotherPayment(item)" [hidden]=" valueCustomizededit !=='Entity View Customized Payment-Edit'" [disabled]="item?.paymentStatus == 'Success'">
                <span>
                <i style="font-size:15px" class="fas fa-edit"></i>
                </span>
                </button>
              </td>
              <td>
              <button [hidden]=" valueCustomizedview !== 'Entity View Customized Payment-View'"
               (click)="viewOthertransaction(item.payId)"
              style="background: none; border: none;font-size:15px;padding:0">
              <i (click)="viewOthertransaction(item.payId)" class="fas fa-eye"
              style="font-size: 15px; color: rgb(39, 39, 95)"></i>
             </button>
            </td>
              <td>
                <span *ngIf="item?.paymentStatus == 'Success'" class="text-success">
                 Success</span>
                <span *ngIf="item?.paymentStatus == 'Due Pending'" class="text-warning">
                 Due Pending</span>
                <span *ngIf="item?.paymentStatus == 'Initiated'" class="text-primary">
                 Initiated</span>
                <span *ngIf="item?.paymentStatus == 'Failure'" class="text-danger">
                 Failure</span>
              </td>
              <td>{{ item.paymentDateTime | date : "dd/MM/yyyy hh:mm a" }}</td>
            </tbody>
          </table>
        </div>
        <div class="text-end mt-2">
          <pagination-controls id="pagination4" (pageChange)="currentcustomized = $event"></pagination-controls>
        </div>
      </div>
    </div>
  </div>

  </div>

  <!-- CUSTAMIZED PAYMENTS   INFO ENDS -->

  <!-- SMS SETTINGS INFO STARTS -->
   
  <div *ngIf="activeTab === 'doot4'">
  <mat-card-header>
    <div class="row d-flex justify-content-start">
      <div class="col-md-3">
        <div class="search">
          <form class="form">
            <label for="search">
              <input (ngModelChange)="onSearchTextsms()" #input name="search" required autocomplete="off"
                placeholder="Search" id="search" type="text" [(ngModel)]="searchTextsms" />
                <div class="icon">
                <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                  xmlns="http://www.w3.org/2000/svg" class="swap-on">
                  <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round" stroke-linecap="round">
                  </path>
                </svg>
              </div>
              <button type="reset" class="close-btn">
                <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                  <path clip-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    fill-rule="evenodd"></path>
                </svg>
              </button>
            </label>
          </form>
        </div>
      </div>
      <div class="col-md-2 mt-1" [hidden]="
          detaislone?.onBoardStatus != 'true'">
        <button (click)="smscreate()" style="
            color: white;
            background-color: #141e46;
            border-radius: 10px;
            font-size: 12px;
          " mat-raised-button [hidden]="valuesmsadd !== 'Sms Setting-Add'">
          Create
        </button>
      </div>
      <div class="col-md-3"></div>
      <div class="col-md-4 mt-1">
        <div>
          <article style="padding: 1%; padding-left: 25px">
            <div class="w-100">
              <div class="d-flex flex-md-row flex-column">
                <h5 class="mr-3">Charge Per Sms : {{ chargepersms }}</h5>
              </div>
            </div>
          </article>
        </div>
      </div>
    </div>
  </mat-card-header>

  <div class="row mt-3">
    <div class="col-12 mb-3 mb-lg-5">
      <div class="card table-nowrap table-card">
        <div class="table-responsive text-nowrap text-center">
          <table class="table table-hover" id="customers">
            <tr>
              <th>S No</th>
              <th>SMS Type</th>
              <th>SMS Description</th>
              <th>SMS Count</th>
              <th>SMS Charge Type</th>
              <th [hidden]="valuesmsapproval !== 'Sms Setting-Approval'">Approval</th>
              <th>Approval Status</th>
              <th [hidden]="valuesmsstatus !== 'Sms Setting-Status'">Status</th>
              <!--<th [hidden]="valuesmsview!=='Sms Setting-View'">View</th>-->
              <th [hidden]="valuesmsedit !== 'Sms Setting-Edit'">Action</th>
              <th>Created By</th>
              <th>Created At</th>
              <th>Modified By</th>
              <th>Modified At</th>
            </tr>
            <tbody *ngFor="let item of smsDetails | search : searchTextsms| paginate: { id: 'pagination5',
            itemsPerPage: itemsPerPage,currentPage: currentsms };let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ item?.type?.smsTitle }}</td>
              <td>
                <i style="cursor: pointer; font-size: 15px;padding:0" class="fa fa-eye"
                  (click)="Smsdescription(item.type?.smsTempDescription)">
                </i>
              </td>
              <td>{{ item?.smsCount }}</td>
              <td>{{ item?.smsCharge }}</td>
              <td class="text-center" [hidden]="valuesmsapproval !== 'Sms Setting-Approval'">
                <span>
                  <button class="buttonDownload" [disabled]="item.smsApprovalStatus !== 'Rejected'"
                    (click)="SmsApproval(item.merchantSmsId)" style="font-size:14px;padding:2px">
                    Approval
                  </button>
                </span>
              </td>
              <td [ngClass]="{
                  approved: item?.smsApprovalStatus == 'approved',
                  rejected: item?.smsApprovalStatus == 'rejected',
                  pending: item?.smsApprovalStatus == 'pending'
                }">
                {{ item.smsApprovalStatus }}
              </td>
              <td [hidden]="valuesmsstatus !== 'Sms Setting-Status'">
                <span>
                  <mat-slide-toggle class="example-margin" color="primary" [checked]="item.smsStatus == 1"
                    (change)="smsStatus($event, item.merchantSmsId)" style="transform: scale(0.9);padding:0">
                  </mat-slide-toggle>
                </span>
              </td>
              <!--<td [hidden]="valuesmsview!=='Sms Setting-View'">
                                <span (click)="ViewMerchantSms(item.merchantSmsId)">
                                    <i class="fas fa-eye" style="font-size: 16px;color: rgb(39, 39, 95);"></i>
                                </span>
                            </td>-->
              <td [hidden]="valuesmsedit !== 'Sms Setting-Edit'">
                <span (click)="editsms(item)">
                  <i class="fas fa-edit" style="font-size: 15px; color: rgb(39, 39, 95)"></i>
                </span>
              </td>
              <td>{{ item?.createdBy }}</td>
              <td>{{ item?.createdDateTime | date : "dd/MM/yyyy hh:mm a" }}</td>
              <td>{{ item?.modifedBy }}</td>
              <td>{{ item?.modifedDateTime | date : "dd/MM/yyyy hh:mm a" }}</td>
            </tbody>
          </table>
        </div>
        <div class="text-end mt-2">
          <pagination-controls id="pagination5" (pageChange)="currentsms = $event"></pagination-controls>
        </div>
      </div>
    </div>
  </div>
   </div>
   
   <!-- SMS SETTINGS INFO STARTS -->

  <!-- AGREEMENT  INFO STARTS -->
 
  <div *ngIf="activeTab === 'doot5'">
  <mat-card-header>
    <div class="col-md-3 mr-2" style="color: blue; font-size: 12px">
      <p style="text-wrap: nowrap">
        <strong>Note:</strong>("You can only create an agreement once theone-time payment is successful.")
      </p>
    </div>
    <div class="row d-flex justify-content-start">
      <div class="col-md-3">
        <div class="search">
          <form class="form">
            <label for="search">
              <input (ngModelChange)="onSearchTextagreement()" #input name="search" required autocomplete="off"
                placeholder="Search" id="search" type="text" [(ngModel)]="searchTextargeement" />
              <div class="icon">
                <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                  xmlns="http://www.w3.org/2000/svg" class="swap-on">
                  <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round" stroke-linecap="round">
                  </path>
                </svg>
              </div>
              <button type="reset" class="close-btn">
                <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                  <path clip-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    fill-rule="evenodd"></path>
                </svg>
              </button>
            </label>
          </form>
        </div>
      </div>
      <div class="col-md-2 mt-1">
        <button [disabled]="this.paymentStatus?.toLowerCase() !== 'success'" (click)="agreementcreate()" style="
            color: white;
            background-color: #141e46;
            border-radius: 10px;
            font-size: 12px;
          " mat-raised-button [hidden]="valueagreementcreate !== 'Entity View Agreement-Add'">
          Create
        </button>
      </div>
    </div>
  </mat-card-header>
  
  <div class="row mt-3">
    <div class="col-12 mb-3 mb-lg-5">
      <div class="card table-nowrap table-card">
        <div class="table-responsive text-nowrap text-center">
          <table class="table table-hover" id="customers">
            <tr>
              <th>S No</th>
              <th>Plan Name</th>
              <th>Service Fee</th>
              <th>Authorized Signatory Name</th>
              <th>Authorized Signatory Designation</th>
              <th [hidden]="valueagreementView !== 'Entity View Agreement-Plan Overview'">Plan Overview</th>
              <th [hidden]="valueagreementlink !=='Entity View Agreement-Entity Agreement Link'">Admin Agreement Link</th>
              <th [hidden]="valueagreementlink !=='Entity View Agreement-Entity Agreement Link'">Entity Agreement Link</th>
              <th>Link Expiry Date</th>
              <th>Fargin Signer Status</th>
              <th>Fargin Signer Signed Date</th>
              <th>Entity Signer Status</th>
              <th>Entity Signer Signed Date</th>
              <th [hidden]="valueagreementlinkdate !=='Entity View Agreement-Link Expiry Date'">Link Expiry Date</th>
              <th [hidden]="valueagreementlinkstatus !=='Entity View Agreement-Link Expiry Status'">Link Expiry Status</th>
              <th [hidden]="valueagreementAgreement !== 'Entity View Agreement-Agreement'">Agreement</th>
              <th [hidden]="valueagreementAgreementSigned !=='Entity View Agreement-Agreement Signed Copy'">Agreement Signed Copy
              </th>
              <th>Created By</th>
              <th>Created At</th>
            </tr>
            <tbody *ngFor="let item of agreementdetails| search : searchTextargeement| paginate: {id: 'pagination6',itemsPerPage: itemsPerPage,currentPage: currentagreement};let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ item.planName }}</td>
              <td>{{ item.serviceFee }}</td>
              <td>{{ item.merchantName }}</td>
              <td>{{ item.merchantDesignation }}</td>
              <td [hidden]="valueagreementView !== 'Entity View Agreement-Plan Overview'">
              <i style="cursor: pointer; font-size: 15px;padding:0" class="fa fa-eye"(click)="view(item.commercialId)"></i>
              </td>
              <td [hidden]="valueagreementlink !=='Entity View Agreement-Entity Agreement Link'" style="margin-top: 5px">
                {{ item.adminAgreementLink | slice : 0 : 25 }}
                <i class="fa-regular fa-copy" style="color: green; font-size: 15px;padding:0"
                  (click)="copyText2(item.adminAgreementLink, i)">
                </i>
                <span *ngIf="copiedIndex2 === i" style="color: green">Copied!</span>
              </td>
              <td [hidden]="valueagreementlink !=='Entity View Agreement-Entity Agreement Link'" style="margin-top: 5px">
                {{ item.agreementLink | slice : 0 : 25 }}
                <i class="fa-regular fa-copy" style="color: green; font-size: 15px;padding:0"
                  (click)="copyText1(item.agreementLink, i)">
                </i>
                <span *ngIf="copiedIndex === i" style="color: green">Copied!</span>
              </td>
              <td>{{ item.expiryLink | date : "dd/MM/yyyy hh:mm a" }}</td>
              <td [ngClass]="item.adminOtpStatus == 0 ? 'not-signed' : 'signed'">
                {{ item.adminOtpStatus == 0 ? "Not Signed" : "Signed" }}
              </td>
              <td>
                <span [hidden]="item.adminVerifiedDate != null">-</span>
                <span [hidden]="item.adminVerifiedDate == null">{{ item.adminVerifiedDate }}</span>
              </td>
              <td [ngClass]="item.merchanOtptStatus == 0 ? 'not-signed' : 'signed'">
                {{ item.merchanOtptStatus == 0 ? "Not Signed" : "Signed" }}
              </td>
              <td>
                <span [hidden]="item.merchantVerifiedDate != null">-</span>
                <span [hidden]="item.merchantVerifiedDate == null">{{ item.merchantVerifiedDate}}</span>
              </td>
              <td [hidden]="valueagreementlinkdate !=='Entity View Agreement-Link Expiry Date'">
                <i style="cursor: pointer; font-size: 15px;padding:0" class="fa-solid fa-calendar-days"
                  (click)="ExtendLinkDate(item.agreementId, item.expiryLink)">
                </i>
              </td>
              <td [hidden]="valueagreementlinkstatus !=='Entity View Agreement-Link Expiry Status'">
                <mat-slide-toggle class="example-margin" color="primary" [checked]="item.expiryLinkStatus == 1"
                  (change)="LinkExpirystatus($event, item.agreementId)" style="transform: scale(0.9);padding:0">
                </mat-slide-toggle>
              </td>
              <td [hidden]="valueagreementAgreement !== 'Entity View Agreement-Agreement'">
                <button style="border: 1px solid white; border-radius: 4px;font-size: 15px;padding:0"
                 (click)="viewagreementdoc(item.agreementId)">
                  <i style="cursor: pointer; font-size: 15px;padding:0" class="fa-solid fa-file-contract"></i>
                </button>
              </td>
              <td [hidden]="valueagreementAgreementSigned !== 'Entity View Agreement-Agreement Signed Copy'">
                <button style="
                    color: white;
                    border: 1px solid white;
                    border-radius: 4px;font-size: 17px;padding:0
                  " (click)="viewsignedagreementdoc(item.agreementId)"
                   [disabled]="item.adminOtpStatus == 0 || item.merchanOtptStatus == 0"
                   [ngClass]="{'disabled-btn':item.adminOtpStatus == 0 || item.merchanOtptStatus == 0,
                    'enabled-btn':item.adminOtpStatus == 1 && item.merchanOtptStatus == 1}">
                  <i style="cursor: pointer; font-size: 17px;padding:0" class="fa-solid fa-file-contract"
                   [ngClass]="{
                      'disabled-icon':
                        item.adminOtpStatus == 0 || item.merchanOtptStatus == 0,
                      'enabled-icon':
                        item.adminOtpStatus == 1 && item.merchanOtptStatus == 1
                    }">
                  </i>
                </button>
              </td>
              <td>{{ item.createdBy }}</td>
              <td>{{ item.createdDateTime | date : "dd/MM/yyyy hh:mm a" }}</td>
            </tbody>
          </table>
        </div>
        <div class="text-end mt-2">
          <pagination-controls id="pagination6" (pageChange)="currentagreement = $event"></pagination-controls>
        </div>
      </div>
    </div>
  </div>
  </div>

<!-- AGREEMENT  INFO ENDS -->


<!-- BRANCH INFO STARTS -->

<div *ngIf="activeTab === 'doot6'">
  <mat-card-header>
    <div class="col-md-3 mr-2" style="color: blue; font-size: 12px"></div>
    <div class="row d-flex justify-content-start">
      <div class="col-md-3">
        <div class="search">
          <form class="form">
            <label for="search">
              <input (ngModelChange)="onSearchTextbranch()" #input name="search" required autocomplete="off"
                placeholder="Search" id="search" type="text" [(ngModel)]="searchTextbranch" />
                <div class="icon">
                <svg stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" fill="none"
                  xmlns="http://www.w3.org/2000/svg" class="swap-on">
                  <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linejoin="round" stroke-linecap="round">
                  </path>
                </svg>
              </div>
              <button type="reset" class="close-btn">
                <svg viewBox="0 0 20 20" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg">
                  <path clip-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    fill-rule="evenodd"></path>
                </svg>
              </button>
            </label>
          </form>
        </div>
      </div>
      <div class="col-md-2 mt-1">
        <button (click)="branchcreate(id)" [hidden]="valuebranchcreate !== 'Entity View Branch-Add'" style="
            color: white;
            background-color: #141e46;
            border-radius: 10px;
            font-size: 12px;
          " mat-raised-button>
          Create
        </button>
      </div>
    </div>
  </mat-card-header>

  <div class="row mt-3">
    <div class="col-12 mb-3 mb-lg-5">
      <div class="card table-nowrap table-card">
        <div class="table-responsive text-nowrap text-center">
          <table class="table table-hover" id="customers">
            <tr>
              <th>S.No</th>
              <th>Account Holder Name</th>
              <th>Account Number</th>
              <th>Account ID</th>
              <th>Branch Name</th>
              <th>SMS Merchant Name</th>
              <th>Bank Name</th>
              <th>IFSC Code</th>
              <th>Api key</th>
              <th>Secret key</th>
              <th [hidden]="valuebranchCustomerview !== 'Entity View Branch-Customer View'">Customer View</th>
              <th [hidden]="valuebranchonlineview !== 'Entity View Branch-Due Transactions View'">Due Transactions</th>
              <th [hidden]="valuebranchTerminal !== 'Entity View Branch-Terminal'">Terminal View</th>
              <th [hidden]="valuebranchkyc !== 'Entity View Branch-KYC'">KYC View</th>
              <th [hidden]="valuebranchStatus !== 'Entity View Branch-Status'">Status</th>
              <th [hidden]="valuebranchAction !== 'Entity View Branch-Action'">Action</th>
              <th>Created By</th>
              <th>Created At</th>
              <th>Modified By</th>
              <th>Modified At</th>
            </tr>
            <tbody *ngFor="let item of branchget| search : searchTextbranch| paginate: {id: 'pagination7',itemsPerPage: itemsPerPage,currentPage: currentbranch };let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ item.accountHolderName }}</td>
              <td>{{ item.accountNumber }}</td>
              <td>{{ item.accountId }}</td>
              <td>{{ item.branchName }}</td>
              <td>{{ item.smsMerchantName }}</td>
              <td>{{ item.bankName }}</td>
              <td>{{ item.ifscCode }}</td>
              <td> {{ item.apiKey | slice : 0 : 10 }}
                <i class="fa-regular fa-copy" style="color: green; font-size: 15px;padding:0"
                  (click)="copyTextbranch(item.apiKey, i)">
                </i>
               <span *ngIf="copy1 === i" style="color: green">Copied!</span>
              </td>
              <td>{{ item.secretKey | slice : 0 : 10 }}
              <i class="fa-regular fa-copy" style="color: green; font-size: 15px;padding:0"
                  (click)="copyText1Branch(item.secretKey, i)"></i>
              <span *ngIf="copy2 === i" style="color: green">Copied!</span>
              </td>
              <td [hidden]="valuebranchCustomerview !== 'Entity View Branch-Customer View'">
                <i style="cursor: pointer; font-size: 15px;padding:0" class="fa fa-eye"
                  (click)="Viewcustomerbranch(item.branchId)">
                </i>
              </td>
              <td [hidden]=" valuebranchonlineview !== 'Entity View Branch-Due Transactions View'">
                <i style="cursor: pointer; font-size: 15px;padding:0" class="fa fa-eye"
                  (click)="Viewonlinecustomerbranch(item.branchId)">
                </i>
              </td>
              <td [hidden]="valuebranchTerminal !== 'Entity View Branch-Terminal'">
                <i style="cursor: pointer; font-size: 15px;padding:0" class="fa fa-eye" (click)="
                    ViewTerminal(item.branchId, item.entityModel?.merchantId)">
                  </i>
              </td>
              <td [hidden]="valuebranchkyc !== 'Entity View Branch-KYC'">
                <i style="cursor: pointer; font-size: 15px;padding:0" class="fa fa-eye" (click)="
                    Viewkycbranch(item.branchId, item.entityModel?.merchantId) ">
                  </i>
              </td>
              <td [hidden]="valuebranchStatus !== 'Entity View Branch-Status'">
              <mat-slide-toggle class="example-margin" color="primary" [checked]="item.accountStatus == 1"
                  (change)="status($event, item.branchId)" style="transform: scale(0.9);padding:0">
                </mat-slide-toggle>
              </td>
              <td [hidden]="valuebranchAction !== 'Entity View Branch-Action'">
              <span>
                <i
                 style="
                      text-align: center;
                      cursor: pointer;
                      font-size: 15px;
                      padding:0;
                      color: #545497;
                    " (click)="branchedit(item)" class="fas fa-edit">
                  </i>
                </span>
              </td>
              <td>{{ item.createdBy }}</td>
              <td>{{ item.createdAt | date : "dd/MM/yyyy hh:mm a" }}</td>
              <td>{{ item.modifiedBy }}</td>
              <td>{{ item.modifiedAt | date : "dd/MM/yyyy hh:mm a" }}</td>
            </tbody>
          </table>
        </div>
        <div class="text-end mt-2 ">
          <pagination-controls id="pagination7" (pageChange)="currentbranch = $event"></pagination-controls>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- BRANCH INFO ENDS -->


</div>


<!-- TAB TWO ENDS -->











